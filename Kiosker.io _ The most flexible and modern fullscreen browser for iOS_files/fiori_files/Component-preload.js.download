jQuery.sap.registerPreloadedModules({"name":"sap/ushell/components/flp/Component-preload","version":"2.0","modules":{"sap/ushell/components/flp/ActionMode.js":function(){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ActionMode");var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(m){this.oModel=m;};};A.prototype.activate=function(){var t;jQuery.sap.require("sap.m.MessageToast");this.oModel.setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds(this.oModel);t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(sap.ushell.resources.i18n.getText("exitEditMode"));t.setText(sap.ushell.resources.i18n.getText("exitEditMode"));}this.oEventBus.publish('launchpad','actionModeActive');};A.prototype.scrollToViewPoint=function(){var d=this.viewPoint;d.restoreLastFocusedTile=true;if(!this.oModel.getProperty('/tileActionModeActive')){var j=jQuery(".sapUshellTileContainerHeader[tabindex=0]");if(j&&j.length>0){var a=j[0].closest('.sapUshellTileContainer');if(a){d.restoreLastFocusedTileContainerById=a.id;}}}d.iDuration=0;window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToGroup",d),0);};A.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions"),T;this.oModel.setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(sap.ushell.resources.i18n.getText("savedChanges"),{duration:4000});T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateEditMode"));T.setText(sap.ushell.resources.i18n.getText("activateEditMode"));}};A.prototype.toggleActionMode=function(m,s,d){var t=m.getProperty('/tileActionModeActive');var c=m.getProperty('/topGroupInViewPortIndex');if(!d){d=[];}var v=d.filter(function(b){return b.getVisible();});var a=v[c];if(a){var e=t?-49:49;var g=document.getElementById("sapUshellDashboardPage-cont").scrollTop-a.getDomRef().offsetTop;this.viewPoint={group:v[c],fromTop:g+e};}else{this.viewPoint={fromTop:0};}if(t){this.deactivate();}else{this.activate();}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent');j.addClass("sapUshellTileContainerEditMode");};A.prototype._openActionsMenu=function(e,t){var a=this,T=t||e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),b=[],o=sap.ui.getCore().byId("TileActions"),i,n,B,c,d,h,f,g;if(T){d=T.getBindingContext().getObject().object;b=l.getTileActions(d);}a.oTileControl=T;jQuery(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");f=jQuery(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");f.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Auto,afterClose:function(){$(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",a.oTileControl);}});}else{o.destroyButtons();}if(b.length===0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<b.length;i++){c=b[i];h=function(c){return function(){a._handleActionPress(c);};}(c);B=new sap.m.Button({text:c.text,icon:c.icon,press:h});o.addButton(B);}}g=e.getSource().getActionSheetIcon();if(g){o.openBy(g);}else{o.openBy(e.getSource());}};A.prototype._handleActionPress=function(a){if(a.press){a.press.call();}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{window.open(a.targetURL,'_blank');}}else{sap.m.MessageToast.show("No Action");}};sap.ushell.components.flp.ActionMode=new A();}());},"sap/ushell/components/flp/Component.js":'// Copyright (c) 2009-2014 SAP SE, All Rights Reserved\njQuery.sap.declare("sap.ushell.components.flp.Component");\nif (window[\'sap-ui-debug\'] !== true) {\n    try {\n        jQuery.sap.require(\'sap.fiori.flp-controls\');\n    } catch (e) {\n        jQuery.sap.log.warning(\'flp-controls failed to load: \' + e.message);\n    }\n}\njQuery.sap.require("sap.ui.core.UIComponent");\njQuery.sap.require("sap.ushell.components.flp.CustomRouter");\n/* global hasher */\njQuery.sap.require("sap.ushell.components.flp.ComponentKeysHandler");\n\nsap.ui.core.UIComponent.extend("sap.ushell.components.flp.Component", {\n\n    metadata: {\n        routing : {\n            config: {\n                viewType: "JS",\n                controlAggregation : "pages",\n                controlId : "navContainerFlp",\n                clearAggregation: false,\n                routerClass : sap.ushell.components.flp.CustomRouter\n            },\n            targets: {\n                appFinder: {\n                    viewName : "sap.ushell.components.flp.launchpad.appfinder.AppFinder"\n                },\n                home: {\n                    viewName : "sap.ushell.components.flp.launchpad.dashboard.DashboardContent"\n                }\n            },\n            routes : [\n                {\n                    name : "home",\n                    target: \'home\',\n                    pattern : "home"\n                }\n            ]\n        },\n\n        version: "1.44.17",\n\n        library: "sap.ushell.components.flp",\n\n        dependencies: {\n            libs: ["sap.m"]\n        },\n        config: {\n            semanticObject: \'Shell\',\n            action: \'home\',\n            title: sap.ushell.resources.i18n.getText("homeBtn_tooltip"),\n            fullWidth: true,\n            hideLightBackground: true,\n            compactContentDensity: true,\n            cozyContentDensity: true\n        }\n    },\n    PERS_KEY: "flp.settings.FlpSettings",\n\n    parseOldCatalogParams: function (sUrl) {\n        "use strict";\n        var mParameters = jQuery.sap.getUriParameters(sUrl).mParams,\n            sValue,\n            sKey;\n\n        for (sKey in mParameters) {\n            if (mParameters.hasOwnProperty(sKey)) {\n                sValue = mParameters[sKey][0];\n                mParameters[sKey] = sValue.indexOf(\'/\') !== -1 ? encodeURIComponent(sValue) : sValue;\n            }\n        }\n        return mParameters;\n    },\n\n    handleNavigationFilter: function (sNewHash) {\n        "use strict";\n        var oShellHash =  sap.ushell.Container.getService("URLParsing").parseShellHash(sNewHash),\n            mParameters;\n\n        if (oShellHash && oShellHash.semanticObject === \'shell\' && oShellHash.action === \'catalog\') {\n            mParameters = this.parseOldCatalogParams(sNewHash);\n            setTimeout(function () {\n                this.getRouter().navTo(\'appFinder\', {\'menu\': \'catalog\', filters : JSON.stringify(mParameters)});\n            }.bind(this), 0);\n            return this.oShellNavigation.NavigationFilterStatus.Abandon;\n        }\n        return this.oShellNavigation.NavigationFilterStatus.Continue;\n    },\n\n    createContent: function () {\n        "use strict";\n        this.oRouter = this.getRouter();\n        this.oModel = new sap.ui.model.json.JSONModel({\n            animationMode: \'full\',\n            groups : [],\n            animationRendered : false,\n            tagFiltering: true,\n            searchFiltering: true,\n            catalogSelection: true,\n            tileActionModeEnabled: false,\n            tileActionModeActive: false,\n            isInDrag: false,\n            rtl: sap.ui.getCore().getConfiguration().getRTL(),\n            personalization: true,\n            editTitle: false,\n            tagList : [],\n            selectedTags : [],\n            userPreferences : {\n                entries : []\n            },\n            enableNotificationsPreview: false,\n            previewNotificationItems: [],\n            viewPortState: sap.ushell.Container.getRenderer(\'fiori2\').getCurrentViewportState()\n        });\n\n        // Subscribe to the event published by Notification settings UI\n        //   after the user enables or disables notification preview\n        sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications", "enablePreviewNotificationChanged", this.enablePreviewNotificationChanged, this);\n\n        this.oModel.setSizeLimit(10000); // override default of 100 UI elements on list bindings\n        this.setModel(this.oModel);\n        this.oConfig = this.getComponentData().config;\n        //check the personalization flag in the Component configuration and in the Renderer configuration\n        this.oShellConfig = sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();\n        sap.ui.getCore().getEventBus().subscribe(\'launchpad\', \'afterSwitchState\', this._handleShellViewPortSateChange, this);\n\n        var oNavContainer,\n            mediaQ,\n            handleMedia,\n            sHash,\n            oShellHash,\n            mParameters,\n            oComponentConfig,\n            bPersonalizationActive = (this.oConfig && (this.oConfig.enablePersonalization || this.oConfig.enablePersonalization === undefined))\n                && (this.oShellConfig && this.oShellConfig.enablePersonalization || this.oShellConfig.enablePersonalization === undefined);\n\n        //the catalog route should be added only if personalization is active\n        if (bPersonalizationActive) {\n            this.oRouter.addRoute({\n                name : "catalog",\n                target: \'appFinder\',\n                pattern : "catalog/:filters:"\n            });\n            this.oRouter.addRoute({\n                name : "appFinder",\n                target: \'appFinder\',\n                pattern : "appFinder/{menu}/:filters:"\n            });\n        }\n        //add the "all" route after the catalog route was added\n        this.oRouter.addRoute({\n            name : "all",\n            target: \'home\',\n            pattern : ":all*:"\n        });\n        this._setConfigurationToModel(this.oConfig);\n\n        //TODO: Please remove all \'NewDashboardManager\' references after complete alignment!\n        var oDashboardMgrData = {\n            model : this.oModel,\n            config : this.oConfig,\n            router : this.oRouter\n        };\n        jQuery.sap.require("sap.ushell.components.flp.launchpad.DashboardManager");\n        this.oDashboardManager = new sap.ushell.components.flp.launchpad.DashboardManager("dashboardMgr",oDashboardMgrData);\n\n        jQuery.sap.require("sap.ushell.resources");\n        this.setModel(sap.ushell.resources.i18nModel, "i18n");\n\n        mediaQ = window.matchMedia("(min-width: 800px)");\n        handleMedia = function (mq) {\n            this.oModel.setProperty("/isPhoneWidth", !mq.matches);\n        }.bind(this);\n        if (mediaQ.addListener) {// condition check if mediaMatch supported(Not supported on IE9)\n            mediaQ.addListener(handleMedia);\n            handleMedia(mediaQ);\n        }\n\n        sap.ui.getCore().getEventBus().subscribe("launchpad", "togglePane", this._createAndAddGroupList, this);\n        sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics", "usageAnalyticsStarted", function () {\n            jQuery.sap.require("sap.ushell.components.flp.FLPAnalytics");\n        });\n\n        this.bContactSupportEnabled = sap.ushell.Container.getService("SupportTicket").isEnabled();\n        if (this.bContactSupportEnabled) {\n            jQuery.sap.require("sap.ushell.UserActivityLog");\n            sap.ushell.UserActivityLog.activate();\n        }\n        oNavContainer = this.initNavContainer();\n\n        this.setInitialConfiguration();\n\n        this.oShellNavigation = sap.ushell.Container.getService("ShellNavigation");\n        this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleNavigationFilter, this));\n\n        //handle direct navigation with the old catalog intent format\n        sHash = hasher.getHash();\n        oShellHash =  sap.ushell.Container.getService("URLParsing").parseShellHash(sHash);\n        if (oShellHash && oShellHash.semanticObject === \'shell\' && oShellHash.action === \'catalog\') {\n            mParameters = this.parseOldCatalogParams(sHash);\n            oComponentConfig = this.getMetadata().getConfig();\n            this.oShellNavigation.toExternal({\n                target: {\n                    semanticObject: oComponentConfig.semanticObject,\n                    action: oComponentConfig.action\n                }\n            });\n            this.getRouter().navTo(\'appFinder\', {\'menu\': \'catalog\', filters : JSON.stringify(mParameters)});\n        }\n\n        if (this.oConfig.enableHomePageSettings !== false) {\n            sap.ui.getCore().getEventBus().subscribe("launchpad", "contentRendered", this._addFlpSettings, this);\n        }\n\n        return oNavContainer;\n    },\n\n    _createAndAddGroupList: function (sChannel, sEventName, oData) {\n        "use strict";\n        if (oData.currentContent && (oData.currentContent.indexOf(\'groupList\') !== -1 || !oData.currentContent.length)) {\n            var oConfig = this.oConfig,\n                oGroupListData = this.runAsOwner(function () {\n                    return this.oDashboardManager.getGroupListView(oConfig);\n                }.bind(this));\n\n            if (!oGroupListData.alreadyCreated) {\n                oGroupListData.groupList.setModel(this.oModel);\n                oGroupListData.groupList.setModel(sap.ushell.resources.i18nModel, "i18n");\n                sap.ushell.renderers.fiori2.RendererExtensions.setLeftPaneContent(oGroupListData.groupList, "home");\n            }\n        }\n    },\n\n    _setConfigurationToModel : function (oConfig) {\n        "use strict";\n        var that = this,\n            oModel = this.oModel,\n            tileActionModeEnabled,\n            oRendererConfig = sap.ushell.Container.getRenderer(\'fiori2\').getModelConfiguration(),\n            bEnableNotificationsUI = oRendererConfig.enableNotificationsUI,\n            bNotificationServiceEnabled = sap.ushell.Container.getService("Notifications").isEnabled(),\n            bNotificationSupportedAppState = oRendererConfig.appState !== "embedded" && oRendererConfig.appState !== "headerless" && oRendererConfig.appState !== "merged" && oRendererConfig.appState !== "standalone",\n            oDevice = sap.ui.Device,\n            bUserPreviewNotificationEnabled = true,\n            bPreviewNotificationEnabledConfig = true,\n            oNotificationUserFlagsPromise,\n            bEligibleDeviceForPreview = oDevice.system.desktop || sap.ui.Device.system.tablet || sap.ui.Device.system.combi;\n\n        if (bNotificationServiceEnabled === true) {\n            // Getting user settings flags from Notifications service and settings the model with the preview (user) enabling flag\n            oNotificationUserFlagsPromise = sap.ushell.Container.getService("Notifications").getUserSettingsFlags();\n\n            oNotificationUserFlagsPromise.done(function (oNotificationUserFlags) {\n                bUserPreviewNotificationEnabled = oNotificationUserFlags.previewNotificationEnabled;\n                that.oModel.setProperty("/userEnableNotificationsPreview", bUserPreviewNotificationEnabled);\n\n                bPreviewNotificationEnabledConfig = sap.ushell.Container.getService("Notifications").getPreviewNotificationEnabledConfig();\n                that.oModel.setProperty("/configEnableNotificationsPreview", bPreviewNotificationEnabledConfig);\n\n                if (bPreviewNotificationEnabledConfig && bEnableNotificationsUI && bNotificationServiceEnabled &&\n                        bEligibleDeviceForPreview && bNotificationSupportedAppState && bUserPreviewNotificationEnabled) {\n                    that.oModel.setProperty("/enableNotificationsPreview", true);\n                }\n            });\n        }\n\n        if (oConfig) {\n            if (oConfig.enablePersonalization !== undefined && this.oShellConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", oConfig.enablePersonalization && this.oShellConfig.enablePersonalization);\n            } else if (oConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", oConfig.enablePersonalization);\n            } else if (this.oShellConfig.enablePersonalization !== undefined) {\n                oModel.setProperty("/personalization", this.oShellConfig.enablePersonalization);\n            }\n            if (oConfig.enableLockedGroupsCompactLayout !== undefined) {\n                oModel.setProperty("/enableLockedGroupsCompactLayout", oConfig.enableLockedGroupsCompactLayout);\n            }\n            if (oConfig.enableCatalogSelection !== undefined) {\n                oModel.setProperty("/catalogSelection", oConfig.enableCatalogSelection);\n            }\n            if (oConfig.enableTilesOpacity !== undefined) {\n                oModel.setProperty("/tilesOpacity", oConfig.enableTilesOpacity);\n            }\n            if (oConfig.enableDragIndicator !== undefined) {\n                oModel.setProperty("/enableDragIndicator", oConfig.enableDragIndicator);\n            }\n            tileActionModeEnabled = false;\n            if (oConfig.enableActionModeMenuButton !== undefined) {\n                oModel.setProperty("/actionModeMenuButtonEnabled", oConfig.enableActionModeMenuButton);\n                tileActionModeEnabled = oConfig.enableActionModeMenuButton;\n            }\n            if (oConfig.enableRenameLockedGroup !== undefined) {\n                oModel.setProperty("/enableRenameLockedGroup", oConfig.enableRenameLockedGroup);\n            } else {\n                oModel.setProperty("/enableRenameLockedGroup", false);\n            }\n\n            if (oConfig.enableActionModeFloatingButton !== undefined) {\n                oModel.setProperty("/actionModeFloatingButtonEnabled", oConfig.enableActionModeFloatingButton);\n                tileActionModeEnabled = tileActionModeEnabled || oConfig.enableActionModeFloatingButton;\n            }\n            oModel.setProperty("/tileActionModeEnabled", tileActionModeEnabled);\n            if (oConfig.enableTileActionsIcon !== undefined) {\n                //Available only for desktop\n                oModel.setProperty("/tileActionsIconEnabled", sap.ui.Device.system.desktop ? oConfig.enableTileActionsIcon : false);\n            }\n            if (oConfig.enableHideGroups !== undefined) {\n                oModel.setProperty("/enableHideGroups", oConfig.enableHideGroups);\n            }\n            // check for title\n            if (oConfig.title) {\n                oModel.setProperty("/title", oConfig.title);\n            }\n\n            /** Easy Access Menues configuration Flags**/\n            // if \'enableEasyAccess\' is supplied but is false\n            if (oConfig.enableEasyAccess != undefined && !oConfig.enableEasyAccess) {\n                oModel.setProperty("/enableEasyAccessSAPMenu", oConfig.enableEasyAccess);\n                oModel.setProperty("/enableEasyAccessUserMenu", oConfig.enableEasyAccess);\n                oModel.setProperty("/enableEasyAccessUserMenuSearch", oConfig.enableEasyAccess);\n                oModel.setProperty("/enableEasyAccessSAPMenuSearch", oConfig.enableEasyAccess);\n            } else {\n                // else \'enableEasyAccess\' not supplied, OR, it is true\n\n                // (1) check \'enableEasyAccessSAPMenu\'\n                // if parameter is supplied (regardless to its value)\n                if (oConfig.enableEasyAccessSAPMenu !== undefined) {\n\n                    // set its value\n                    oModel.setProperty("/enableEasyAccessSAPMenu", oConfig.enableEasyAccessSAPMenu);\n\n                    // in case \'enableEasyAccessSAPMenu\' supplied but is false, we force \'enableEasyAccessSAPMenuSearch\' to be false\n                    if (!oConfig.enableEasyAccessSAPMenu) {\n                        oModel.setProperty("/enableEasyAccessSAPMenuSearch", false);\n                    } else {\n                        // if \'enableEasyAccessSAPMenu\' supplied and true, we set the \'enableEasyAccessSAPMenuSearch\' (and if not supplied default is true)\n                        if (oConfig.enableEasyAccessSAPMenuSearch !== undefined) {\n                            oModel.setProperty("/enableEasyAccessSAPMenuSearch", oConfig.enableEasyAccessSAPMenuSearch);\n                        } else {\n                            // else \'enableEasyAccessSAPMenu\' not supplied - default is true\n                            oModel.setProperty("/enableEasyAccessSAPMenuSearch", true);\n                        }\n                    }\n                } else {\n                    // else \'enableEasyAccessSAPMenu\' is not defined. so we set its value to be enableEasyAccess as a fall back\n                    oModel.setProperty("/enableEasyAccessSAPMenu", oConfig.enableEasyAccess);\n\n                    // now we need to see if the \'enableEasyAccessSAPMenuSearch\' was suppled or not\n                    // if \'enableEasyAccessSAPMenu\' supplied and true, we set the \'enableEasyAccessSAPMenuSearch\' (and if not supplied default is true)\n                    if (oConfig.enableEasyAccessSAPMenuSearch !== undefined) {\n                        oModel.setProperty("/enableEasyAccessSAPMenuSearch", oConfig.enableEasyAccessSAPMenuSearch);\n                    } else {\n                        oModel.setProperty("/enableEasyAccessSAPMenuSearch", oConfig.enableEasyAccess);\n                    }\n                }\n\n\n                // (2) check \'enableEasyAccessUserMenu\'\n                // if parameter is supplied (regardless to its value)\n                if (oConfig.enableEasyAccessUserMenu !== undefined) {\n\n                    // set its value\n                    oModel.setProperty("/enableEasyAccessUserMenu", oConfig.enableEasyAccessUserMenu);\n\n                    // in case \'enableEasyAccessUserMenu\' supplied but is false, we force \'enableEasyAccessUserMenuSearch\' to be false\n                    if (!oConfig.enableEasyAccessUserMenu) {\n                        oModel.setProperty("/enableEasyAccessUserMenuSearch", false);\n                    } else {\n                        // if \'enableEasyAccessUserMenu\' supplied and true, we set the \'enableEasyAccessUserMenu\' (and if not supplied default is true)\n                        if (oConfig.enableEasyAccessUserMenuSearch !== undefined) {\n                            oModel.setProperty("/enableEasyAccessUserMenuSearch", oConfig.enableEasyAccessUserMenuSearch);\n                        } else {\n                            // else \'enableEasyAccessUserMenu\' not supplied - default is true\n                            oModel.setProperty("/enableEasyAccessUserMenuSearch", true);\n                        }\n                    }\n                } else {\n                    // else \'enableEasyAccessUserMenu\' is not defined. so we set its value to be enableEasyAccess as a fall back\n                    oModel.setProperty("/enableEasyAccessUserMenu", oConfig.enableEasyAccess);\n\n                    // now we need to see if the \'enableEasyAccessSAPMenuSearch\' was suppled or not\n                    // if \'enableEasyAccessSAPMenu\' supplied and true, we set the \'enableEasyAccessSAPMenuSearch\' (and if not supplied default is true)\n                    if (oConfig.enableEasyAccessUserMenuSearch !== undefined) {\n                        oModel.setProperty("/enableEasyAccessUserMenuSearch", oConfig.enableEasyAccessUserMenuSearch);\n                    } else {\n                        oModel.setProperty("/enableEasyAccessUserMenuSearch", oConfig.enableEasyAccess);\n                    }\n                }\n            }\n\n            /** Catalog Search **/\n            // old flag support \'enableSearchFiltering\' & new flag \'enableCatalogSearch\'\n            if (oConfig.enableSearchFiltering !== undefined) {\n                oModel.setProperty("/searchFiltering", oConfig.enableSearchFiltering);\n            } else if (oConfig.enableCatalogSearch !== undefined) {\n                oModel.setProperty("/searchFiltering", oConfig.enableCatalogSearch);\n            } else {\n                // deafult is true\n                oModel.setProperty("/searchFiltering", true);\n            }\n\n            /** Catalog Search Tags**/\n            // old flag support \'enableTagFiltering\' & new flag \'enableCatalogTagFilter\'\n            if (oConfig.enableTagFiltering !== undefined) {\n                oModel.setProperty("/tagFiltering", oConfig.enableTagFiltering);\n            } else  if (oConfig.enableCatalogTagFilter !== undefined) {\n                oModel.setProperty("/tagFiltering", oConfig.enableCatalogTagFilter);\n            } else {\n                // deafult is true\n                oModel.setProperty("/tagFiltering", true);\n            }\n\n            if (oConfig.sapMenuServiceUrl !== undefined) {\n                oModel.setProperty("/sapMenuServiceUrl", oConfig.sapMenuServiceUrl);\n            }\n            if (oConfig.userMenuServiceUrl !== undefined) {\n                oModel.setProperty("/userMenuServiceUrl", oConfig.userMenuServiceUrl);\n            }\n            if (oConfig.easyAccessNumbersOfLevels !== undefined) {\n                oModel.setProperty("/easyAccessNumbersOfLevels", oConfig.easyAccessNumbersOfLevels);\n            }\n\n            // Unless explicitly turned off, enable home page settings.\n            var oDisplayPromise = oConfig.enableHomePageSettings !== false ?\n                this._getCurrentHomePageGroupDisplay() : jQuery.Deferred().resolve();\n\n            oDisplayPromise.done(function(sDisplay) {\n                sDisplay = sDisplay || oConfig.homePageGroupDisplay;\n\n                if (sDisplay !== undefined) {\n                    oModel.setProperty("/homePageGroupDisplay", sDisplay);\n                }\n            });\n\n            // xRay enablement configuration\n            oModel.setProperty("/enableHelp", !!this.oShellConfig.enableHelp);\n            oModel.setProperty("/disableSortedLockedGroups", !!oConfig.disableSortedLockedGroups);\n\n            // enable/disable animations\n            if (oRendererConfig.animationMode) {\n                oModel.setProperty("/animationMode", oRendererConfig.animationMode);\n            }\n        }\n    },\n\n    initNavContainer: function (oController) {\n        "use strict";\n        var oNavContainer = new sap.m.NavContainer({\n            id: "navContainerFlp",\n            defaultTransitionName: \'show\'\n        });\n\n        return oNavContainer;\n    },\n\n    setInitialConfiguration: function () {\n        "use strict";\n        this.oRouter.initialize();\n\n        //no need to enable accessibility feature on phone devices\n        if (!sap.ui.Device.system.phone) {\n            // set keyboard navigation handler\n            sap.ushell.components.flp.ComponentKeysHandler.init(this.oModel, this.oRouter);\n            sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppKeysHandler(sap.ushell.components.flp.ComponentKeysHandler.handleFocusOnMe);\n            var translationBundle = sap.ushell.resources.i18n,\n                aShortcutsDescriptions = [];\n\n            aShortcutsDescriptions.push({text: "Alt+H", description: translationBundle.getText("hotkeyHomePage")});\n\n            if (this.oModel.getProperty("/personalization")) {\n                aShortcutsDescriptions.push({text: "Alt+A", description: translationBundle.getText("hotkeyAppFinder")});\n                aShortcutsDescriptions.push({text: "Ctrl+Enter", description: translationBundle.getText("hotkeySaveEditing")});\n            }\n\n            sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppShortcuts(sap.ushell.components.flp.ComponentKeysHandler.handleShortcuts, aShortcutsDescriptions);\n\n        }\n        sap.ui.getCore().getEventBus().publish("launchpad", "initialConfigurationSet");\n    },\n\n    _handleShellViewPortSateChange: function (sNameSpace, sEventName, oEventData) {\n        "use strict";\n        var sCurrentShellViewportState = oEventData ? oEventData.getParameter(\'to\') : \'\';\n\n        this.oModel.setProperty(\'/viewPortState\', sCurrentShellViewportState);\n    },\n\n    /**\n     * Handler for the use-case in which the user enables or disables notifications preview in the notification settings UI.\n     * In this case the value of enableNotificationsPreview needs to be re-calculated, considering the choice of the user\n     */\n    enablePreviewNotificationChanged: function (sChannelId, sEventId, oData) {\n        "use strict";\n        var oRendererConfig = sap.ushell.Container.getRenderer(\'fiori2\').getModelConfiguration(),\n            oDevice = sap.ui.Device.system,\n            bEnableNotificationsUI = oRendererConfig.enableNotificationsUI,\n            bConfigEnableNotificationsPreview = this.oModel.getProperty("/configEnableNotificationsPreview"),\n            bNotificationServiceEnabled = sap.ushell.Container.getService("Notifications").isEnabled(),\n            bEligibleDeviceForPreview = oDevice.desktop || oDevice.tablet || oDevice.combi,\n            bNotificationSupportedAppState = oRendererConfig.appState !== "embedded" && oRendererConfig.appState !== "headerless" && oRendererConfig.appState !== "standalone",\n            bCalculatedPreviewEnableFlag;\n\n        this.oModel.setProperty("/userEnableNotificationsPreview", oData.bPreviewEnabled);\n\n        bCalculatedPreviewEnableFlag = bConfigEnableNotificationsPreview &&\n            bEnableNotificationsUI &&\n            bNotificationServiceEnabled &&\n            bEligibleDeviceForPreview &&\n            bNotificationSupportedAppState &&\n            oData.bPreviewEnabled;\n\n        this.oModel.setProperty("/enableNotificationsPreview", bCalculatedPreviewEnableFlag);\n    },\n\n    _addFlpSettings: function () {\n        "use strict";\n\n        // Add FLP settings only once.\n        if (this.bFlpSettingsAdded){\n            return;\n        }\n\n        // TODO: Switch entry to GeneralEntry (@IdanAsraf)\n        var oRenderer = sap.ushell.Container.getRenderer("fiori2"),\n            oResourceBundle = sap.ushell.resources.i18n,\n            that = this;\n\n        var flpSettingsView;\n\n        var oEntry = {\n            title: oResourceBundle.getText(\'FlpSettings_entry_title\'),\n            entryHelpID: "flpSettingsEntry",\n            value: function () {\n                return jQuery.Deferred().resolve("");\n            },\n            content: function () {\n                flpSettingsView = sap.ui.xmlview({\n                    viewName: "sap.ushell.components.flp.settings.FlpSettings",\n                    viewData: {\n                        initialDisplayMode: that.oModel.getProperty("/homePageGroupDisplay") || "scroll"\n                    }\n                });\n                return jQuery.Deferred().resolve(flpSettingsView);\n            },\n            onSave: function () {\n                var sDisplay = flpSettingsView.getController().onSave();\n\n                // save anchor bar mode in personalization\n                var oDeferred = that._getPersonalizer("homePageGroupDisplay")\n                                    .setPersData(sDisplay);\n\n                // Log failure if occurs.\n                oDeferred.fail(function (error) {\n                    jQuery.sap.log.error(\n                        "Failed to save the anchor bar mode in personalization", error,\n                        "sap.ushell.components.flp.settings.FlpSettings");\n                });\n\n                that.oModel.setProperty("/homePageGroupDisplay", sDisplay);\n                return jQuery.Deferred().resolve();\n            },\n            onCancel: function () {\n                return jQuery.Deferred().resolve();\n            },\n            icon: "sap-icon://home"\n        };\n\n        oRenderer.addUserPreferencesEntry(oEntry);\n        this.bFlpSettingsAdded = true;\n    },\n\n    _getCurrentHomePageGroupDisplay: function () {\n        \'use strict\';\n\n        var dfdPers = this._getPersonalizer(\'homePageGroupDisplay\').getPersData();\n\n        dfdPers.fail(function (error) {\n            jQuery.sap.log.error(\n                "Failed to load anchor bar state from the personalization", error,\n                "sap.ushell.components.flp.settings.FlpSettings");\n        });\n\n        return dfdPers;\n    },\n\n    _getPersonalizer: function (sItem) {\n        "use strict";\n\n        if (this.oPersonalizer) {\n            return this.oPersonalizer;\n        }\n        var oPersonalizationService = sap.ushell.Container.getService("Personalization");\n        var oComponent = sap.ui.core.Component.getOwnerComponentFor(this);\n        var oScope = {\n            keyCategory: oPersonalizationService.constants.keyCategory.FIXED_KEY,\n            writeFrequency: oPersonalizationService.constants.writeFrequency.LOW,\n            clientStorageAllowed: true\n        };\n\n        var oPersId = {\n            container: this.PERS_KEY,\n            item: sItem\n        };\n\n        this.oPersonalizer = oPersonalizationService.getPersonalizer(oPersId, oScope, oComponent);\n        return this.oPersonalizer;\n    },\n\n    exit : function () {\n        "use strict";\n        sap.ui.getCore().getEventBus().unsubscribe(\'launchpad\', \'shellViewStateChanged\', this._handleShellViewPortSateChange, this);\n        this.oDashboardManager.destroy();\n    }\n});\n',"sap/ushell/components/flp/ComponentKeysHandler.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.ComponentKeysHandler");jQuery.sap.require("sap.ushell.ui.launchpad.AccessibilityCustomData");var c=function(){this.aTileWrapperClasses=['.sapUshellTile','.sapUshellLinkTile'];};c.prototype={keyCodes:jQuery.sap.KeyCodes,tileFocusCustomData:new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"0",writeToDom:true}),handleCatalogKey:function(){this.oRouter.navTo("appFinder",{'menu':'catalog'});},handleHomepageKey:function(){this.oRouter.navTo("home");var m=sap.ui.getCore().byId("meAreaHeaderButton");if(m&&m.getSelected()){m.firePress();return;}var n=sap.ui.getCore().byId("NotificationsCountButton");if(n&&n.getSelected()){n.firePress();}},handleDoneEditMode:function(){var i=this.oModel.getProperty('/tileActionModeActive');if(i){var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d){d.firePress();}}},getNumberOfTileInRow:function(p,i){var j=jQuery(i?".sapUshellLinkTile:first":".sapUshellTile:first");if(!j.length){return false;}var a;if(p==="catalog"){a=jQuery("#catalogTiles .sapUshellTileContainerContent").width();}else{a=jQuery("#dashboardGroups").width();}var n=Math.floor(a/j.outerWidth(true));return n;},goToTileContainer:function(k){var i=this.oModel.getProperty('/tileActionModeActive');if(i){sap.ushell.components.flp.ComponentKeysHandler.goToFirstVisibleTileContainer();}else{sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile();}return true;},goToLastVisitedTile:function(j,l){var a=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex");var b=j||jQuery(a.get(t));var d=b.find('.sapUshellTile:visible')["first"](),e,f;if(b&&l){e=b.find(".sapUshellTile:visible[tabindex='0']");if(window.location.search.indexOf("new_links_container=true")===-1){f=b.find(".sapUshellLinkTile:visible[tabindex='0']");}else{f=b.find(".sapMGTLineMode:visible[tabindex='0']");}}else{e=jQuery(".sapUshellTile:visible[tabindex='0']");if(window.location.search.indexOf("new_links_container=true")===-1){f=jQuery(".sapUshellLinkTile:visible[tabindex='0']");}else{f=jQuery(".sapMGTLineMode:visible[tabindex='0']");}}if(!d.length&&!e.length&&!f.length){return false;}if(e.length){this.setTileFocus(e);return true;}if(f.length){this.setTileFocus(f);return true;}this.setTileFocus(d);return true;},goToFirstVisibleTileContainer:function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),t=this.oModel.getProperty("/topGroupInViewPortIndex"),a=jQuery(j.get(t));if(!a[0]){return false;}this.setTileContainerSelectiveFocus(a);return true;},goToFirstTileOfSiblingGroup:function(s,e){e.preventDefault();var a=jQuery(document.activeElement).closest(".sapUshellDashboardGroupsContainerItem");if(!a.length)return;var t='first',n=a[s+"All"](".sapUshellDashboardGroupsContainerItem:has(.sapUshellTile:visible):not(.sapUshellCloneArea)");if(!n.length){n=a;t=(s==="next")?'last':'first';}else{n=n.first();}var j=n.find(".sapUshellTile:visible")[t]();this.moveScrollDashboard(j);return false;},animateTileMoveInGroup:function(g,f,s){var d=jQuery.Deferred();sap.ushell.Layout.initGroupDragMode(g);var t=g.getTiles().slice();var a=t.indexOf(f);var b=t.indexOf(s);t.splice(b,0,t.splice(a,1)[0]);var e=sap.ushell.Layout.organizeGroup(t);setTimeout(function(){sap.ushell.Layout.renderLayoutGroup(g,e);});setTimeout(function(){sap.ushell.Layout.endDragMode();d.resolve();},300);return d.promise();},_moveTileInGroup:function(g,f,s){var a=g.getBindingContext().getObject();var b=a.tiles.indexOf(f.getBindingContext().getObject());var d=a.tiles.indexOf(s.getBindingContext().getObject());var e=a.tiles.splice(b,1);a.tiles.splice(d,0,e[0]);var h=g.getBindingContext().getPath();g.getModel().setProperty(h,a);setTimeout(function(){this.setTileFocus(jQuery(s.getDomRef()));}.bind(this),100);},moveTileInGroup:function(g,f,s){if(!this.oModel.getProperty("/personalization")){return;}document.activeElement.blur();if(sap.ushell.Layout.isAnimationsEnabled()){this.animateTileMoveInGroup(g,f,s).then(function(){this._moveTileInGroup(g,f,s);}.bind(this));}else{this._moveTileInGroup(g,f,s);}},animateMoveTileToDifferentGroup:function(s,d,a,b){var e=jQuery.Deferred();sap.ushell.Layout.initGroupDragMode(s);sap.ushell.Layout.initGroupDragMode(d);var f=s.getTiles().slice();var g=d.getTiles().slice();var t=f.indexOf(a);if(b==="left"||b==="up"||b==="down"){g.push(f.splice(t,1)[0]);}if(b==="right"){g.unshift(f.splice(t,1)[0]);}var h=sap.ushell.Layout.organizeGroup(f);var i=sap.ushell.Layout.organizeGroup(g);var j=sap.ushell.Layout.getTilePositionInMatrix(a,i);var k=d.getDomRef().querySelector(".sapUshellInner").getBoundingClientRect();var l=sap.ushell.Layout.calcTranslate(j.row,j.col);var m=k.left+l.x;var n=k.top+l.y;var o=jQuery("#dashboardGroups");var D=o.get(0).getBoundingClientRect();var p=a.getDomRef().getBoundingClientRect();var q=(-D.top)+p.top;var r=(-D.left)+p.left;var u=(-D.top)+n;var v=(-D.left)+m;o.css("position","relative");var w=a.$().clone().removeAttr("id data-sap-ui").css({"transform":"translate3d("+r+"px, "+q+"px, 0px)","list-style-type":"none","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)",position:"absolute",left:0,top:0});o.append(w);a.$().css("visibility","hidden");w.height();w.css("transform","translate3d("+v+"px, "+u+"px, 0px)");setTimeout(function(){sap.ushell.Layout.renderLayoutGroup(s,h);sap.ushell.Layout.renderLayoutGroup(d,i);});setTimeout(function(){sap.ushell.Layout.endDragMode();w.remove();o.removeAttr("style");e.resolve();},300);return e.promise();},_moveTileToDifferentGroup:function(s,d,a,b,e){if(this.oModel.getProperty("/personalization")){if(s.getIsGroupLocked()||d.getIsGroupLocked()){return;}var f=s.getBindingContext().getObject();var g=d.getBindingContext().getObject();var t=f.tiles.indexOf(a.getBindingContext().getObject());if(b==="left"||b==="up"||b==="down"){g.tiles.push(f.tiles[t]);}if(b==="right"){g.tiles.splice(0,0,f.tiles[t]);}f.tiles.splice(t,1);var h=d.getBindingContext().getPath();d.getModel().setProperty(h,g);var i=s.getBindingContext().getPath();s.getModel().setProperty(i,f);var j=d.getTiles();if(b==="left"||b==="up"||b==="down"){var k=j[j.length-1];}else{var k=j[0];}setTimeout(function(){this.setTileFocus(jQuery(k.getDomRef()));}.bind(this),100);}},moveTileToDifferentGroup:function(s,d,a,b){if(!this.oModel.getProperty("/personalization")){return;}document.activeElement.blur();if(sap.ushell.Layout.isAnimationsEnabled()){this.animateMoveTileToDifferentGroup(s,d,a,b).then(function(){this._moveTileToDifferentGroup(s,d,a,b);}.bind(this));}else{this._moveTileToDifferentGroup(s,d,a,b);}},moveTile:function(d){var j=jQuery(".sapUshellDashboardView"),a=sap.ui.getCore().byId(j.attr("id"));a.getModel().setProperty('/isInDrag',true);setTimeout(function(){a.getModel().setProperty('/isInDrag',false);},300);if(this.oModel.getProperty("/personalization")){var i=this.getGroupAndTilesInfo();if(!i||i.group.getProperty('isGroupLocked')){return;}var m=true,I,n=this.getNextTile(d,i,I,m);if(!n){return;}else{var b=n.getParent();}if(b===i.group){this.moveTileInGroup(i.group,i.curTile,n);}else{n=this.moveTileToDifferentGroup(i.group,b,i.curTile,d);}}},_findClosestTile:function(d,t,a){var b=(a instanceof HTMLElement)?a.getBoundingClientRect():a.getDomRef().getBoundingClientRect();var e=b.right-((b.right-b.left)/2);if(a.getMode&&a.getMode()==="LineMode"){var m=a.$().height()>parseInt(a.$().css("line-height"),10);if(m){e=(d==="down")?b.right:b.left;}}var f=t.indexOf(a);var s=d==="down"?1:-1;var n,g,r;var h=Infinity;for(var i=f+s;!n;i+=s){var j=t[i];if(!j){break;}var k=(j instanceof HTMLElement)?j.getBoundingClientRect():j.getDomRef().getBoundingClientRect();if(d==="down"&&b.top>=k.top){continue;}if(d==="up"&&b.bottom<=k.bottom){continue;}if(g&&r!=k.top){n=g;break;}r=k.top;var l=Math.abs(k.left-e);var o=Math.abs(k.right-e);var p=l>o?o:l;if(h>p){h=p;g=j;r=k.top;}else{n=g;}}return n||g;},getNextUpDownTileWithScreenPosition:function(d,i,m){var g=i.tiles.concat(i.links);if(!g.length){g.push(i.group.oPlusTile)}var n=this.getNextGroup(d,i);if(n){var a=n.getTiles().concat(n.getLinks());if(!a.length){a.push(n.oPlusTile);}}var b=d==="down"?g.concat(a):a.concat(g);return this._findClosestTile(d,b,i.curTile);},getNextUpDownTileWithLayout:function(d,i,m){var n,a;var b=d==="down"?1:-1;var e=!i.tiles.length&&!i.links.length;var I=i.group.getIsGroupLocked();var f=jQuery(i.curTile.getDomRef()).hasClass('sapUshellPlusTile');var l=i.group.getLinks();var g=sap.ushell.Layout.organizeGroup(i.curTile.isLink?i.links:i.tiles,i.curTile.isLink);var t=sap.ushell.Layout.getTilePositionInMatrix(i.curTile,g);if(!t&&!e&&!f){return;}if(!g[t.row+b]){if(!i.curTile.isLink&&l.length&&d==='down'){if(!m){return l[0];}}if(i.curTile.isLink&&i.tiles.length&&d==='up'){return i.tiles[0];}t=e||f?{row:0,col:0}:t;a=this.getNextGroup(d,i);if(!a){return;}e=!a.getTiles().length&&!a.getLinks().length;if(!e){var F=this._getAggregationToFocusInNextGroup(a,d);var N=this._isNextTileLink(F);g=sap.ushell.Layout.organizeGroup(F,N);b=0;t.row=d==="down"?0:g.length-1;}}if(e&&I){return undefined;}if(e){return a.oPlusTile;}if(typeof g[t.row+b][t.col]==="object"&&!e){n=g[t.row+b][t.col];}else{n=this.getNextUpDownTile(g,t.row+b,t.col,d);}return n;},_isNextTileLink:function(t){if(t&&t.length){var j=jQuery(t[0].getDomRef());return j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");}return false;},_getAggregationToFocusInNextGroup:function(n,d){var g=function(){if(n.getTiles().length){return n.getShowPlaceholder()?[].concat(n.getTiles(),n.oPlusTile):n.getTiles();}};var a=function(){if(n.getLinks().length){return n.getLinks();}};var i=sap.ui.getCore().getConfiguration().getRTL();if(i){if(d==="down"||d==="left"){return g()||a();}else if(d==="up"||d==="right"){return a()||g();}}else{if(d==="down"||d==="right"){return g()||a();}else if(d==="up"||d==="left"){return a()||g();}}},isLastLineFull:function(l){var m=this.getNumberOfTileInRow(),a=l[l.length-1].filter(Boolean);return a.length===m;},getNextUpDownTile:function(l,r,a,d){var n=r,b=l.length,e,f=d==="up"?-1:1;while((n>=0&&n<b)&&!e){if(typeof l[n][a]!=="object"){e=l[n][a];}n=n+f;}if(e){return;}n=r;while((typeof l[n][a]!=="object")&&a>=0){a--;}return l[n][a];},getNextTile:function(d,a,I,m){var n,b,e,s,t,l,w,f,o,g=sap.ui.getCore().getConfiguration().getRTL()?-1:1,h=!a.tiles.length,j=d==="right"?1:-1;if(a.pageName==='catalog'){if(d=='right'||d=='left'){n=!h?a.tiles[a.curTileIndex+(g*j)]:undefined;return n;}if(a.curTileIndex==='0'&&d==='up'){return undefined;}b=this.whichTileRow(a.curTileIndex,a);o=parseFloat(a.curTile.getDomRef().offsetLeft);if(d=="down"){e=a.tiles.slice(a.curTileIndex+1,a.curTileIndex+(a.sizeOfLine*2));}else{s=(s>0)?s:0;e=a.tiles.slice(s,a.curTileIndex).reverse();}for(var i=0,k=e.length;i<k;i++){t=e[i].getDomRef();l=parseFloat(t.offsetLeft);w=parseFloat(t.offsetWidth);f=l+w;if(l<=o&&f>=o){n=e[i];return n;}}if(this.nextRowIsShorter(d,b,a)){n=this.getNextTileInShorterRow(d,b,a);return n;}}else{if(d==="left"||d==="right"){var p=a.curTileIndex+(g*j);var F=a.curTile.isLink?a.links:a.tiles;if(F[p]&&!(m&&F[p].getDomRef().className.indexOf("sapUshellPlusTile")>0)){n=F.length?F[p]:undefined;}if(n){return n;}if(g==1){if(d==="right"&&!a.curTile.isLink&&a.links.length&&!m){return a.links[0];}if(d==="left"&&a.curTile.isLink&&a.tiles.length){return a.group.getShowPlaceholder()?a.group.oPlusTile:a.tiles[a.tiles.length-1];}}else{if(d==="left"&&!a.curTile.isLink&&a.links.length&&!m){return a.links[0];}if(d==="right"&&a.curTile.isLink&&a.tiles.length){return a.group.getShowPlaceholder()?a.group.oPlusTile:a.tiles[a.tiles.length-1];}}var q=this.getNextGroup(d,a);if(!q){return;}else{var r=this._getAggregationToFocusInNextGroup(q,d);if(r&&r.length){var u=r.length-1;if(d==="right"){n=r[g===1?0:u];}else{n=r[g===1?u:0];}}else{n=q.oPlusTile;}}}if(d==="down"||d==="up"){if(window.location.search.indexOf("new_links_container=true")===-1){n=this.getNextUpDownTileWithLayout(d,a,m);}else{n=this.getNextUpDownTileWithScreenPosition(d,a,m);}}}return n;},getNextTileInShorterRow:function(d,a,i){var l=d==='down'?this.getLastTileIdInRow(i,a+1):this.getLastTileIdInRow(i,a-1);return i.tiles[l];},getLastTileIdInRow:function(a,l){var b=0;for(var i=0;i<a.rowsData.length;i++){b+=a.rowsData[i];if(i===l){break;}}return b-1;},nextRowIsShorter:function(d,a,i){if(d==='down'&&a!=i.rowsData.length-1){return i.rowsData[a]>i.rowsData[a+1];}if(d==='up'&&a!=0){return i.rowsData[a]>i.rowsData[a-1];}else{return false;}},getNextGroup:function(d,i){var n,g=i.group.getParent().getGroups(),a=sap.ui.getCore().getConfiguration().getRTL(),b=g.indexOf(i.group);if(d==="right"||d==="left"){if(a){d=(d==="right")?"up":"down";}else{d=(d==="right")?"down":"up";}}if(d==="down"||d==="up"){var e=d==="up"?-1:1;n=g[b+e];if(!n){return;}while(!n.getVisible()&&(b>=0&&b<g.length)){b=b+e;n=g[b];if(!n){return;}}}if(!n.getVisible()){return;}return n;},getGroupAndTilesInfo:function(j,p){if(!j){j=this.getFocusOnTile(jQuery(document.activeElement));}if(!j.length){return;}var a=sap.ui.getCore().byId(j.attr('id'));var g=a.getParent();var r;var t;var l;if(!g.getTiles){a=g;g=g.getParent();}a.isLink=j.hasClass('sapUshellLinkTile')||j.hasClass('sapMGTLineMode');if(p=="catalog"){r=this.getCatalogLayoutData();t=[];var b=jQuery('#catalogTiles').find('.sapUshellTile:visible');for(var i=0;i<b.length;i++){t.push(sap.ui.getCore().byId(b[i].id));}}else{if(g.getTiles){t=g.getTiles();l=g.getLinks();if(g.getShowPlaceholder()&&!a.isLink){t.push(g.oPlusTile);}}}var s=this.getNumberOfTileInRow(p,a.isLink);return{pageName:p,curTile:a,curTileIndex:a.isLink?l.indexOf(a):t.indexOf(a),tiles:t,links:l,sizeOfLine:s,group:g,rowsData:r};},getCatalogLayoutData:function(){var j=jQuery('#catalogTiles .sapUshellInner').children(':visible'),m=this.getNumberOfTileInRow('catalog'),r=[],a=0;for(var i=1;i<j.length;i++){if(jQuery(j[i]).hasClass("sapUshellTile")){a++;}if(jQuery(j[i]).hasClass("sapUshellHeaderTile")){r.push(a);a=0;}if(a>=m){r.push(a);a=0;}}if(a>0){r.push(a);}return r;},whichTileRow:function(a,b){var t=0,i;for(i=0;i<b.rowsData.length;i++){t+=b.rowsData[i];if(a<t){return i;}}},goToSiblingElementInTileContainer:function(d,j,p){var a=j.closest('.sapUshellTileContainer'),b,e,f;if(b=this.getFocusTileContainerBeforeContent(j)){if(d==='up'||d==="left"){this._goToNextTileContainer(b,d);}else{f=a.find('.sapUshellTileContainerHeader:first');this.setTabIndexOnTileContainerHeader(f);f.focus();}return;}if(b=this.getFocusTileContainerHeader(j)){if(d==='up'){this.setTabIndexOnTileContainerHeader(f);if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,d);}}else if(d==="down"){e=a.find('.sapUshellTile:first');if(e.length){var t=jQuery(e);this.scrollToTileAndSetFocus(t,p);}else{this._goToNextTileContainer(b,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(a)){this._goToNextTileContainer(b,"left");}}else{f=j.closest(".sapUshellTileContainerHeader");f.focus();}}else if(d==="right"){var g=j.hasClass("sapMInputBaseInner");if(!g){e=a.find('.sapUshellTile:first');if(e.length){this.setTileFocus(e);}else{this._goToNextTileContainer(b,"down");}}}return;}if(b=this.getFocusOnTile(j)){this.goFromFocusedTile(d,b,p,true);return;}if(b=this.getFocusOnTileContainerAfterContent(j)){if(d==='up'||d==="left"){this._goToFirstTileInTileContainer(b);}else{this._goToNextTileContainer(b,d);}}},_goToNextTileContainer:function(j,d){var a=j.closest('.sapUshellTileContainer'),A=jQuery('.sapUshellTileContainer:visible'),n=(d==='down')?1:-1,b,e;b=jQuery(A[A.index(a)+n]);if(b){e=b.find('.sapUshellTileContainerHeader');if(d==='down'){if(!this._goToTileContainerBeforeContent(b)){this.setTabIndexOnTileContainerHeader(e);this.setTileContainerSelectiveFocus(b);}}else{if(this._goToTileContainerAfterContent(b)){return;}if(d==='up'){if(!this._goToFirstTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}else if(d==='left'){if(!this._goToLastTileInTileContainer(b)){this.setTabIndexOnTileContainerHeader(e);e.focus();}}}}},_goToLastTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTile:last'),d=a.find('.sapUshellLinkTile:last');if(!d.length&&!b.length){return false;}this.setTileFocus(d.length?d:b);return true;},_goToFirstTileInTileContainer:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=jQuery(a.find('.sapUshellTile').get(0));if(b.length){this.setTileFocus(b);return true;}else{return false;}},_goToTileContainerBeforeContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerBeforeContent button:visible');if(b.length){b.focus();return true;}else{return false;}},_goToTileContainerAfterContent:function(j){var a=j.hasClass('sapUshellTileContainer')?j:j.closest('.sapUshellTileContainer'),b=a.find('.sapUshellTileContainerAfterContent button:visible');if(b.length){b.focus();return true;}else{return false;}},goFromFocusedTile:function(d,j,p,i){var a=this.getGroupAndTilesInfo(j,p),n,b,e,f,g,I;if(!a){return;}n=this.getNextTile(d,a,i);if(i){b=jQuery(j).closest('.sapUshellTileContainer');if(!n){if(d==='down'||d==='right'){g=jQuery(b).find('.sapUshellTileContainerAfterContent button:visible');g.focus();return;}if(d==='up'){this.setTabIndexOnTileContainerHeader(b.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(b);return;}if(d==='left'){f=b.find('.sapUshellTileContainerHeader');f.focus();}}else{e=jQuery(n.getDomRef()).closest('.sapUshellTileContainer');I=b.length&&e.length&&(b.attr('id')===e.attr('id'));if(I){var t=jQuery(n.getDomRef());this.scrollToTileAndSetFocus(t,p);}else{if(d==='down'||d==='right'){if(!this._goToTileContainerAfterContent(b)){this.setTabIndexOnTileContainerHeader(e.find('.sapUshellTileContainerHeader'));this.setTileContainerSelectiveFocus(e);}}else if(d==='up'||'left'){f=b.find('.sapUshellTileContainerHeader');this.setTabIndexOnTileContainerHeader(f);f.focus();}}}}else if(n){var t=jQuery(n.getDomRef());this.scrollToTileAndSetFocus(t,p);}},scrollToTileAndSetFocus:function(t,p){var a=t.offset().top+t.height();if(p==="catalog"){var o=(a-jQuery("body").height())-jQuery("#catalogTilesPage").offset().top+200;jQuery('#catalogTilesPage section').animate({scrollTop:o},0,function(){this.setTileFocus(t);}.bind(this));}else{this.moveScrollDashboard(t);}},deleteTile:function(j){var t=j.attr("id");if(!t){return;}var T=sap.ui.getCore().byId(t);var a=this.getGroupAndTilesInfo(j);var n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=this.getNextTile("left",a);}if(!n||(n&&n.getParent()!=a.group)){n=a.group.oPlusTile;}if(n){if(!a.curTile.isLink){this.setTileFocus(jQuery(n.getDomRef()));}setTimeout(function(g,b){var d=g.getTiles();if(!d.length){if(a.links.length&&a.curTile.isLink){n=this.getNextTile("right",a);if(!n||(n&&n.getParent()!=a.group)){n=a.curTile;}this.setTileFocus(jQuery(n.getDomRef()));return;}if(a.group.getProperty('defaultGroup')){var f=this.getNextGroup("right",a);n=f.getTiles()[0]||f.oPlusTile;this.setTileFocus(jQuery(n.getDomRef()));}this.setTileFocus(jQuery(g.oPlusTile.getDomRef()));return;}var n;for(var i=0;i<d.length;i++){if(d[i].getProperty('uuid')==b){n=d[i];break;}}if(n){this.setTileFocus(jQuery(n.getDomRef()));}}.bind(this,a.group,n.getProperty('uuid')),100);}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","deleteTile",{tileId:T.getUuid()});},setTabIndexOnTileContainerHeader:function(j){jQuery(".sapUshellTileContainerHeader").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);jQuery(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var a=j.find('.sapUshellContainerTitle:first'),b=j.find('.sapUshellContainerHeaderActions:first');j.attr('tabindex',0);a.attr('tabindex',0);b.find('button').attr('tabindex',0);}},setTileContainerSelectiveFocus:function(j){var a=j.find('.sapUshellTileContainerBeforeContent button'),b=j.find('.sapUshellTileContainerHeader:first'),B=a.length&&a.is(":visible");if(B){a.focus();}else if(b.length){this.setTabIndexOnTileContainerHeader(b);b.focus();}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){var n=sap.ui.getCore().byId('navContainerFlp'),C=n.getCurrentPage(),o=n?n.getCurrentPage().getViewName():undefined,a;var i=!!((o==="sap.ushell.components.flp.launchpad.appfinder.AppFinder")&&(C.getController().getCurrentMenuName()==="catalog"));a=j.find('[tabindex]');if(i){var h=sap.ushell.components.flp.ComponentKeysHandler;h.setFocusOnCatalogTile(a.eq(0));}}jQuery(".sapUshellTile").attr("tabindex",-1);if(window.location.search.indexOf("new_links_container=true")===-1){jQuery(".sapUshellLinkTile").attr("tabindex",-1);}else{jQuery(".sapMGTLineMode").attr("tabindex",-1);}j.attr("tabindex",0);var b=jQuery("#Fiori2LoadingDialog")[0];if(!b||b.style.visibility==="hidden"){j.focus();var t;if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}t.addAggregation("customData",this.tileFocusCustomData,true);}}},setFocusOnCatalogTile:function(j){var p=jQuery(".sapUshellTile[tabindex=0]"),a,v;if(p.length){jQuery(".sapUshellTileContainerContent").find('[tabindex*=0]').attr("tabindex",-1);a=p.find('[tabindex], a').andSelf().filter('[tabindex], a');a.attr("tabindex",-1);}if(!j){v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible");if(v.length){j=jQuery(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(j){var a=j.closest(".sapUshellTileContainer")[0].id,y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(a).getBoundingClientRect().top;y+=49;jQuery('#sapUshellDashboardPage section').stop().animate({scrollTop:y},0,function(){this.setTileFocus(j);}.bind(this));},moveGroupFromDashboard:function(d,j){var a,t=jQuery(".sapUshellDashboardGroupsContainerItem"),i,b;a=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(a);b=d=="up"||d=="left"?i-1:i+1;this.moveGroup(i,b);},moveGroup:function(f,t){var g=jQuery(".sapUshellDashboardGroupsContainerItem"),n=jQuery(".sapUshellDisableDragAndDrop").length;if(t<0||t>=g.length||t<n){return;}var a=sap.ui.getCore();var d={fromIndex:f,toIndex:t};var b=a.getEventBus();b.publish("launchpad","moveGroup",d);setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];this.setTabIndexOnTileContainerHeader(jQuery(e));jQuery(e).focus();}.bind(this),100);},getFocusGroupFromDashboard:function(j){var i=j.closest('.sapUshellTileContainerHeader').length&&j[0].tagName==='H2';return i?j:false;},getFocusTileContainerBeforeContent:function(j){var a=j.closest('.sapUshellTileContainerBeforeContent');return a.length?a:false;},getFocusTileContainerHeader:function(j){var a=j.closest('.sapUshellTileContainerHeader');return a.length?a:false;},getFocusOnTileContainerAfterContent:function(j){var a=j.closest('.sapUshellTileContainerAfterContent');return a.length?a:false;},getFocusOnTile:function(j){var a;jQuery.each(this.aTileWrapperClasses,function(i,t){var b=j.closest(t);a=b.length?b:false;return!(a);});return a;},renameGroup:function(){var j=jQuery(document.activeElement);var a=this.getFocusGroupFromDashboard(j);if(a){a.click();}},arrowsButtonsHandler:function(d,e){var j=jQuery(document.activeElement),i=this.oModel.getProperty('/tileActionModeActive');if(j.hasClass("sapUshellAnchorItem")){e.preventDefault();this.handleAnchorNavigationItemsArrowKeys(d);}else{if(i){if(!j.hasClass('sapMInputBaseInner')){e.preventDefault();this.goToSiblingElementInTileContainer(d,j);}}else{e.preventDefault();this.goFromFocusedTile(d,j);}}},handleAnchorNavigationItemsArrowKeys:function(d){var a=jQuery(".sapUshellAnchorItem:visible"),j=jQuery(document.activeElement),i=a.index(j),n=j,I=sap.ui.getCore().getConfiguration().getRTL();if(I){d=d==='left'?'right':'left';}if(d==="left"||d==="up"){if(i>0){n=a.get(i-1);}}else if(d==="right"||d==="down"){if(i<a.length-1){n=a.get(i+1);}}this.setAnchorItemFocus(jQuery(n));},setAnchorItemFocus:function(j){jQuery(".sapUshellAnchorItem").attr("tabindex",-1);j.attr("tabindex",0);j.focus();},appFinderHomeEndButtonsHandler:function(d,k){k.preventDefault();var v=jQuery(".sapUshellTile:visible,.sapUshellAppBox:visible"),j=jQuery(document.activeElement),a;if(v.length){if(d==="home"){a=jQuery(v.get(0));}if(d==="end"){a=jQuery(v.get(v.length-1));}}if(a){this.appFinderFocusAppBox(j,a);}},appFinderPageUpDownButtonsHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);var a=jQuery(j.parents()[2]);var n=this.getNextCatalog(d,a);if(n){var b=n.find("li"),f=jQuery(b.get(0));}if(f.length){this.appFinderFocusAppBox(j,f);}else if(d==="down"){var e=a.find("li"),l=jQuery(e.get(e.length-1));this.appFinderFocusAppBox(j,l);}},homeEndButtonsHandler:function(s,e){var j=jQuery(document.activeElement),t;if(j.hasClass("sapUshellAnchorItem")){e.preventDefault();this.setAnchorItemFocus(jQuery(".sapUshellAnchorItem:visible:"+s));return;}if(j.hasClass("sapUshellTile")&&j.closest("#dashboardGroups").length){e.preventDefault();if(e.ctrlKey===true){t=jQuery(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();}else{t=j.parent().find(".sapUshellTile:visible:not('.sapUshellPlusTile')")[s]();}this.setTileFocus(t);return;}},deleteButtonHandler:function(){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var j,a=jQuery(document.activeElement);if(j=this.getFocusOnTile(a)){if(!j.hasClass('sapUshellLockedTile')&&!j.hasClass('sapUshellPlusTile')){this.deleteTile(j);}return;}}},ctrlPlusArrowKeyButtonsHandler:function(s){var j,a=jQuery(document.activeElement),f=jQuery(a).hasClass('sapUshellLinkTile');if(!f&&(j=this.getFocusOnTile(a))){this.moveTile(s);return;}if(j=this.getFocusTileContainerHeader(a)){var b=j.closest('.sapUshellTileContainerContent');if(b.hasClass('sapUshellTileContainerDefault')||b.hasClass('sapUshellTileContainerLocked')){return;}else{this.moveGroupFromDashboard(s,j);}}},spaceButtonHandler:function(e){var j=jQuery(document.activeElement);if(j.hasClass("sapUshellTile")){e.preventDefault();var g=j.find('[role="button"]');if(g){var a=g.attr("id");var b=sap.ui.getCore().byId(a),i=this.oModel.getProperty('/tileActionModeActive');if(b&&!i){b.firePress();return false;}}j.click();return false;}},goToFirstAnchorNavigationItem:function(){this.setAnchorItemFocus(jQuery(".sapUshellAnchorItem:visible:first"));},goToSelectedAnchorNavigationItem:function(){this.setAnchorItemFocus(jQuery(".sapUshellAnchorItemSelected"));return jQuery(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(k,f){var h=sap.ushell.components.flp.ComponentKeysHandler,n=sap.ui.getCore().byId('navContainerFlp'),C=n.getCurrentPage(),o=C.getViewName();if(o=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent"){if(f){if(k.shiftKey){var a=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(a.length){a.focus();}else{h.goToTileContainer(k);}}else{if(!h.goToSelectedAnchorNavigationItem()){sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile()}}}else{h.mainKeydownHandler(k);h.dashboardKeydownHandler(k);}}if(o=="sap.ushell.components.flp.launchpad.appfinder.AppFinder"){if(f){if(!k.shiftKey){var b=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(b&&b.getVisible()){b.focus();}else{h.appFinderFocusMenuButtons(k);}}else{h.setFocusOnCatalogTile();}}else{var m=C.getController().getCurrentMenuName();if(m==="catalog"){h.mainKeydownHandler(k);h.catalogKeydownHandler(k);}else{h.easyAccessKeydownHandler(k);}}}},groupHeaderNavigation:function(){var j=jQuery(document.activeElement),a;if(j.hasClass("sapUshellTileContainerHeader")){a=j.find(".sapUshellContainerTitle");a.focus();}else if(a=j.closest(".sapUshellTileContainerHeader")){a.focus();}},handleShortcuts:function(e){var h=sap.ushell.components.flp.ComponentKeysHandler;if(e.altKey){switch(String.fromCharCode(e.keyCode)){case'A':if(h.oModel.getProperty("/personalization")){h.handleCatalogKey();}break;case'H':h.handleHomepageKey();break;}}if(e.ctrlKey&&e.keyCode===13){h.handleDoneEditMode();}},mainKeydownHandler:function(e){e=e||window.event;switch(e.keyCode){case this.keyCodes.SPACE:this.spaceButtonHandler(e);break;case this.keyCodes.HOME:this.homeEndButtonsHandler("first",e);break;case this.keyCodes.END:this.homeEndButtonsHandler("last",e);break;}},catalogKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;switch(k.keyCode){case h.keyCodes.ARROW_UP:h.appFinderUpDownHandler("up",k);break;case h.keyCodes.ARROW_DOWN:h.appFinderUpDownHandler("down",k);break;case h.keyCodes.ARROW_RIGHT:h.appFinderRightLeftHandler("right",k);break;case h.keyCodes.ARROW_LEFT:h.appFinderRightLeftHandler("left",k);break;case h.keyCodes.PAGE_UP:h.appFinderPageUpDownButtonsHandler('up',k);break;case h.keyCodes.PAGE_DOWN:h.appFinderPageUpDownButtonsHandler('down',k);break;case h.keyCodes.HOME:h.appFinderHomeEndButtonsHandler("home",k);break;case h.keyCodes.END:h.appFinderHomeEndButtonsHandler("end",k);break;}},appFinderFocusAppBox:function(j,a){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");a.find(".sapUshellPinButton").attr("tabindex","0");a.attr("tabindex","0").focus();},appFinderFocusMenuButtons:function(k){var b=jQuery("#catalog, #userMenu, #sapMenu").filter("[tabindex=0]");if(b.length){b.eq(0).focus();k.preventDefault();return true;}else{return false;}},appFinderUpDownHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);if(!j.is(".sapUshellAppBox, .sapUshellTile")){return;}var a=jQuery(j.parents()[2]);var b=a.find("li"),C=jQuery.makeArray(b),n=[];var e=this.getNextCatalog(d,a);if(e){var f=e.find("li"),n=jQuery.makeArray(f);}var g=d==="down"?C.concat(n):n.concat(C);var h=jQuery(this._findClosestTile(d,g,j.get(0)));this.appFinderFocusAppBox(j,h);},getNextCatalog:function(d,a){var n;if(d==="down"){n=a.next();}if(d==="up"){n=a.prev();}if(!n){return;}return n;},appFinderRightLeftHandler:function(d,k){k.preventDefault();var j=jQuery(document.activeElement);if(!j.is(".sapUshellAppBox, .sapUshellTile")){return;}var a=jQuery(j.parents()[2]);var C=a.find("li");var i=C.index(j);var b=d==="right"?i+1:i-1,e;if(b>=0&&b<C.length){e=jQuery(C[b]);}else if(b<0){var n=this.getNextCatalog("up",a);if(n){var f=n.find("li");if(f.length){e=jQuery(f.get(f.length-1));}}}else if(b===C.length){var n=this.getNextCatalog("down",a);if(n){var f=n.find("li");if(f.length){e=jQuery(f.get(0));}}}this.appFinderFocusAppBox(j,e);},easyAccessRightLeftHandler:function(d,k){k.preventDefault();var h=sap.ushell.components.flp.ComponentKeysHandler;var s=d=="right"?"next":"prev";var j=jQuery(document.activeElement);if(!j.hasClass("sapUshellAppBox")){return;}var n=j.parent()[s]();if(n.length){h.appFinderFocusAppBox(j,n.children());}},easyAccessUpDownHandler:function(d,k){var h=sap.ushell.components.flp.ComponentKeysHandler;k.preventDefault();var f=document.activeElement;var j=jQuery(document.activeElement);if(!j.hasClass("sapUshellAppBox")){return;}var a=f.getBoundingClientRect();var b=[].slice.call(document.querySelectorAll(".sapUshellAppBox"));if(d=="up"){b.reverse();}b.splice(0,b.indexOf(f)+1);var n;for(var i=0;i<b.length;i++){var r=b[i].getBoundingClientRect();var e=(r.left<a.right&&r.right>a.left);if(e){n=b[i];break;}}if(n){h.appFinderFocusAppBox(j,jQuery(n));}},easyAccessHomeEndHandler:function(d,k){k.preventDefault();var h=sap.ushell.components.flp.ComponentKeysHandler;var s=d=="home"?"first":"last";var j=jQuery(document.activeElement);if(!j.hasClass("sapUshellAppBox")){return;}var n=j.parent().parent().children()[s]().children();if(j==n){return;}h.appFinderFocusAppBox(j,jQuery(n));},easyAccessKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;switch(k.keyCode){case h.keyCodes.ARROW_UP:h.easyAccessUpDownHandler("up",k);break;case h.keyCodes.ARROW_DOWN:h.easyAccessUpDownHandler("down",k);break;case h.keyCodes.ARROW_RIGHT:h.easyAccessRightLeftHandler("right",k);break;case h.keyCodes.ARROW_LEFT:h.easyAccessRightLeftHandler("left",k);break;case h.keyCodes.HOME:case h.keyCodes.PAGE_UP:h.easyAccessHomeEndHandler("home",k);break;case h.keyCodes.END:case h.keyCodes.PAGE_DOWN:h.easyAccessHomeEndHandler("end",k);break;}},dashboardKeydownHandler:function(k){var h=sap.ushell.components.flp.ComponentKeysHandler;switch(k.keyCode){case h.keyCodes.F2:h.renameGroup();break;case h.keyCodes.F7:h.groupHeaderNavigation();break;case h.keyCodes.DELETE:h.deleteButtonHandler();break;case h.keyCodes.BACKSPACE:h.deleteButtonHandler();break;case h.keyCodes.ARROW_UP:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("up");}else{h.arrowsButtonsHandler("up",k);}break;case h.keyCodes.ARROW_DOWN:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("down");}else{h.arrowsButtonsHandler("down",k);}break;case h.keyCodes.ARROW_RIGHT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("right");}else{h.arrowsButtonsHandler("right",k);}break;case h.keyCodes.ARROW_LEFT:if(k.ctrlKey===true){h.ctrlPlusArrowKeyButtonsHandler("left");}else{h.arrowsButtonsHandler("left",k);}break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroup("prev",k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroup("next",k);break;}return true;},init:function(m,r){this.oModel=m;this.oRouter=r;}};sap.ushell.components.flp.ComponentKeysHandler=new c();}());},"sap/ushell/components/flp/CustomRouter.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.CustomRouter");sap.ui.core.routing.Router.extend("sap.ushell.components.flp.CustomRouter",{constructor:function(){sap.ui.core.routing.Router.apply(this,arguments);this.attachRouteMatched(this._onHandleRouteMatched,this);},navTo:function(){if(!this._bIsInitialized){this.initialize();}sap.ui.core.routing.Router.prototype.navTo.apply(this,arguments);},destroy:function(){sap.ui.core.routing.Router.prototype.destroy.apply(this,arguments);},_onHandleRouteMatched:function(e){var p=e.getParameters(),t=sap.ui.getCore().byId(p.config.controlId);var r=this.getTarget(p.config.target).display();t.to(r.oTargetParent);setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","launchpadCustomRouterRouteMatched");},0);}});})();},"sap/ushell/components/flp/FLPAnalytics.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.FLPAnalytics");var o=["appOpened","deleteTile","createGroup","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){jQuery.sap.log.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.flp.FLPAnalytics");}}function h(c,d,D){var A=hasher.getHash(),f;window.swa.custom1={ref:A};switch(d){case'appOpened':s(A);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[A].title]);E.unsubscribe("launchpad","appOpened",h);break;case'bookmarkTileAdded':f=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[f,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:f]);break;case'actionModeActive':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case'catalogTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case'dashboardTileClick':sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case'dashboardTileLinkClick':window.swa.custom1={ref:D.targetHash.substr(1)};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}jQuery(window).unload(function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(b,t);}catch(e){jQuery.sap.log.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.flp.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(c,i,d){E.subscribe("launchpad",c,h,t);});})();},"sap/ushell/components/flp/launchpad/DashboardManager.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.DashboardManager");jQuery.sap.require("sap.ushell.services.Message");var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);};sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce","createTile","deleteCatalogTileFromGroup","resetGroupsOnFailure","createGroupAndSaveTile"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.getDashboardManager&&sap.ushell.components.flp.launchpad.getDashboardManager()){return sap.ushell.components.flp.launchpad.getDashboardManager();}sap.ushell.components.flp.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oRouter=s.router;this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.aPendingCatalogQueue=[];this.bRequestRunning=false;this.tagsPool=[];this.registerEvents();this.oTileCatalogToGroupsMap={};this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.oPopover=null;this.tileUuid=null;this.segmentsStore=[];this.oGroupNotLockedFilter=new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);if(this.oRouter){var t=this.oRouter.getTarget('home');t.attachDisplay(function(e){this.oDashboardView=e.getParameter('view');}.bind(this));}},createMoveActionDialog:function(){var G=this.oGroupNotLockedFilter;this.moveDialog=new sap.m.SelectDialog("moveDialog",{title:sap.ushell.resources.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v),b=e.getSource().getBinding("items");b.filter([f,G]);},contentWidth:'400px',confirm:function(e){var c=e.getParameter("selectedContexts"),E=sap.ui.getCore().getEventBus();if(c.length){E.publish("launchpad","moveTile",{sTileId:this.tileUuid,toGroupId:c[0].getObject().groupId,toIndex:c[0].getObject().tiles.length,source:this.moveDialog.getId()});E.publish("launchpad","scrollToGroup",{groupId:c[0].getObject().groupId,groupChanged:false,focus:false});}}.bind(this),cancel:function(){var c=jQuery('.sapUshellTile[tabindex="0"]')[0];if(c){c.focus();}},items:{path:"/groups",filters:[G],template:new sap.m.StandardListItem({title:"{title}"})}});this.moveDialog.setModel(this.oModel);},registerEvents:function(){var e=sap.ui.getCore().getEventBus(),t=this;e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","moveTile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("renderCatalog",this.loadAllCatalogs,this);e.subscribe("showCatalog",this.updateTilesAssociation,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);this.oPageBuilderService.registerTileActionsProvider(function(T){jQuery.sap.require("sap.m.MessageBox");return[{text:sap.ushell.resources.i18n.getText('moveTileDialog_action'),press:function(E){t.tileUuid=t.getModelTileById(t.oPageBuilderService.getTileId(T)).uuid;if(!t.moveDialog){t.createMoveActionDialog();}t.moveDialog.getBinding("items").filter([t.oGroupNotLockedFilter]);t.moveDialog.open();}}];});},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","moveTile",this._moveTile,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("renderCatalog",this.loadAllCatalogs,this);e.unsubscribe("showCatalog",this.updateTilesAssociation,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ushell.components.flp.launchpad.getDashboardManager=undefined;},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,T){t.oPageBuilderService.refreshTile(T.object);});});},_sortableStart:function(){this.oSortableDeferred=$.Deferred();},_createBookmark:function(c,e,d){var t=d.group?d.group.object:"";delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});},this));},_addBookmarkToModel:function(c,e,d){var t=d.tile,G,o=d.group,s,T,n,i,a,N,I;if(!d||!t){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!o){G=this.getModel().getProperty("/groups");for(I=0;I<G.length;I++){if(G[I].isDefaultGroup===true){o=G[I].object;break;}}}s=this.oPageBuilderService;T=s.getTileType(t);n=this._getTileModel(t,s.isGroupLocked(o),T,this._addModelToTileViewUpdateQueue);i=this._getIndexOfGroupByObject(o);a=this.oModel.getProperty("/groups/"+i);a.tiles.push(n);a.visibilityModes=sap.ushell.utils.calcVisibilityModes(a,true);N=a.tiles.length;this._updateModelWithTileView(i,N);this.oModel.setProperty("/groups/"+i,a);},_refreshGroupInModel:function(c,e,G){var l=sap.ushell.Container.getService("LaunchPage"),E='Failed to refresh group with id:'+G+' in the model',t=this;l.getGroups().fail(jQuery.sap.log.error(E,null,"sap.ushell.components.flp.launchpad.DashboardManager")).done(function(a){a.some(function(o){if(l.getGroupId(o)===G){l.getDefaultGroup().done(function(d){var i=G===d.getId()?true:false,b=t._getGroupModel(o,i),f=t._getIndexOfGroupByObject(b.object);t.oModel.setProperty("/groups/"+f,b);});return true;}});});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o);});},this);},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false;}else{this.aRequestQueue.shift()();}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false;},_createGroup:function(c,e,d){var G=this._getGroupModel(null),a=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+a.length,G);},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);},_createGroupAt:function(c,e,d){var n=parseInt(d.location,10),G=this.oModel.getProperty("/groups"),o=this._getGroupModel(null,false,n===G.length,d),m=this.oModel,i;o.index=n;G.splice(n,0,o);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}for(i=n+1;i<G.length;i++){G[i].index++;}m.setProperty("/groups",G);},_getIndexOfGroup:function(G){var n=null,a=this.oModel.getProperty("/groups");jQuery.each(a,function(b,o){if(o.groupId===G){n=b;return false;}});return n;},_getIndexOfGroupByObject:function(G){var n=null,a=this.oModel.getProperty("/groups"),s=this.oPageBuilderService.getGroupId(G);a.forEach(function(m,b){var c=this.oPageBuilderService.getGroupId(m.object);if(c===s){n=b;return false;}}.bind(this));return n;},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G);},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,a=null;jQuery.each(G,function(b,o){jQuery.each(o.tiles,function(c,T){if(T.uuid===t){n=b;a=c;return false;}});if(n!==null){return false;}});return n!==null?"/groups/"+n+"/tiles/"+a:null;},_moveInArray:function(a,n,b){if(b>=a.length){var k=b-a.length;while((k--)+1){a.push(undefined);}}a.splice(b,0,a.splice(n,1)[0]);},_updateGroupIndices:function(a){var k;for(k=0;k<a.length;k++){a[k].index=k;}},_deleteGroup:function(c,e,d){var t=this,G=d.groupId,s,a=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),i=a.length-1===n,o=null,r,m,b,B;b=i?n-1:n;this._destroyGroupModel("/groups/"+n);o=a.splice(n,1)[0].object;if(i){this.oModel.setProperty("/groups/"+b+"/isLastGroup",i);}s=sap.ushell.Container.getService("LaunchPage").getGroupId(o);m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",a);this._updateGroupIndices(a);if(b>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[b].groupId}),200);}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var f=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o);}catch(h){this._resetGroupsOnFailure("fail_to_delete_group_msg");return;}r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.DELETE_GROUP,[f,s]);this._showLocalizedMessage("group_deleted_msg",[f]);}.bind(this));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_resetGroup:function(c,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),s,a,r,b;this.oModel.setProperty("/groups/"+n+"/sortable",false);a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);s=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o.object);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object);}catch(f){this._resetGroupsOnFailure("fail_to_reset_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(G,o,R){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.RESET_GROUP,[s,a]);var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object,this._addAndUpdateModelWithTileView);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true);b=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(G);if(b){b.rerender();}},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_moveGroup:function(c,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,a=this.oModel.getProperty("/tileActionModeActive"),r,o,s,b=this,i,D;if(!a){f=this._adjustFromGroupIndex(f,G);}o=G[f];s=o.groupId;if(!a){t=this._adjustToGroupIndex(t,G,s);}D=G[t].object;this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}G[G.length-1].isLastGroup=true;m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{this._getOriginalGroupIndex(D).done(function(n){r=this.oPageBuilderService.moveGroup(o.object,n);r.done(function(){sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(b.analyticsConstants.PERSONALIZATION,b.analyticsConstants.MOVE_GROUP,[o.title,f,t,s]);});r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}.bind(this));}catch(h){this._resetGroupsOnFailure("fail_to_move_group_msg");return;}},this));},_adjustToGroupIndex:function(t,a,b){var v=0,I=false,i=0;for(i=0;i<a.length&&v<t;i++){if(a[i].isGroupVisible){if(a[i].groupId===b){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(a,b){var v=0,i;for(i=0;i<b.length;i++){if(b[i].isGroupVisible){v++;}if(v===a+1){return i;}}return a;},_getOriginalGroupIndexByIndex:function(n){var G=this.oModel.getProperty("/groups"),s=G[n].object;return this._getOriginalGroupIndex(s);},_getOriginalGroupIndex:function(s){var a=this.oPageBuilderService,t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(b){var n=null;jQuery.each(b,function(c,o){if(a.getGroupId(o)===a.getGroupId(s)){n=c;return false;}});d.resolve(n);});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg")();d.reject();});return d;},_changeGroupTitle:function(c,e,d){var n=d.newTitle,G=this.oModel.getProperty("/groups"),s=d.groupId,a=d.groupId,b=this._getIndexOfGroup(s),o=this.oModel.getProperty("/groups/"+b),O=o.title,r,t=this;this.oModel.setProperty("/groups/"+b+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{if(b===G.length-1){r=this.oPageBuilderService.addGroup(n,b);r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}else{this._getOriginalGroupIndexByIndex(b+1).done(function(h){r=this.oPageBuilderService.addGroupAt(n,h);r.done(this._handleAfterSortable($.proxy(function(s,N){var b=this._getIndexOfGroup(s);this._loadGroup(b,N);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,s]);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));r.always($.proxy(this._checkRequestQueue,this));}.bind(this));}}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}},this));}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n);}catch(f){this._resetGroupsOnFailure("fail_to_rename_group_msg");return;}r.done(function(){a=sap.ushell.Container.getService("LaunchPage").getGroupId(o.object);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.RENAME_GROUP,[O,n,a]);});r.fail(this._handleAfterSortable($.proxy(function(s,O){var h=this._getPathOfGroup(s);this._showLocalizedError("fail_to__msg");this.oModel.setProperty(h+"/title",O);this._requestFailed();},this,s)));r.always($.proxy(this._checkRequestQueue,this));},this));}},createTile:function(d){var c=d.catalogTileContext,C=d.groupContext,G=this.oModel.getProperty(C.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={},b;b=sap.ui.getCore().getEventBus();$.proxy(b.publish,b,"launchpad","addTile",{catalogTileContext:c,groupContext:C});if(!c){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(c.getProperty("src"),C.getProperty("object"));}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return;}var t=this;r.done(function(T){var f=t._getPathOfGroup(s),h=sap.ushell.Container.getService("LaunchPage").getTileTitle(T);t._addTileToGroup(f,T);R={group:G,status:1,action:'add'};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,h]);a.resolve(R);}).fail(function(){R={group:G,status:0,action:'add'};a.resolve(R);}).always(function(){t._checkRequestQueue();});},this));return a.promise();},createGroup:function(t){var d=jQuery.Deferred();if(!sap.ushell.utils.validHash(t)){return d.reject({status:0,action:'createNewGroup'});}var G=this._getGroupModel(null,false,true);var a=this.oModel.getProperty("/groups");var s=G.groupId;var i=a.length;if(i>0){a[i-1].isLastGroup=false;}G.title=t;G.index=i;G.editMode=false;a.push(G);this.oModel.setProperty("/groups/",a);this._addRequest(function(t){try{var r=this.oPageBuilderService.addGroup(t);}catch(e){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable(function(s,n){var b=this._getIndexOfGroup(s);this._loadGroup(b,n);var c=new sap.ui.model.Context(this.oModel,"/groups/"+b);d.resolve(c);}.bind(this,s)));r.fail(function(b){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));var R={group:b.group,status:0,action:'createNewGroup'};d.resolve(R);}.bind(this));r.always($.proxy(this._checkRequestQueue,this));}.bind(this,t));return d.promise();},createGroupAndSaveTile:function(d){var c=d.catalogTileContext,n=d.newGroupName,a=jQuery.Deferred(),r={};if(sap.ushell.utils.validHash(n)&&c){this.createGroup(n).then(function(C){var p=this.createTile({catalogTileContext:c,groupContext:C});p.done(function(b){r={group:b.group,status:1,action:'addTileToNewGroup'};a.resolve(r);}).fail(function(b){r={group:b.group,status:0,action:'addTileToNewGroup'};a.resolve(r);});}.bind(this));}return a.promise();},_deleteTile:function(c,e,d){var t=this,T=d.tileId||d.originalTileId,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){var f=false;jQuery.each(o.tiles,function(a,b){if(b.uuid===T||b.originalTileId===T){t._destroyTileModel("/groups/"+n+"/tiles/"+a);var h=o.tiles.splice(a,1)[0],r,s=sap.ushell.Container.getService("LaunchPage").getTileTitle(h.object),C=sap.ushell.Container.getService("LaunchPage").getCatalogTileId(h.object),i=sap.ushell.Container.getService("LaunchPage").getCatalogTileTitle(h.object),j=sap.ushell.Container.getService("LaunchPage").getTileId(h.object),p=t.oModel.getProperty("/personalization");o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);t.oModel.setProperty("/groups/"+n,o);t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,h.object);}catch(k){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return;}r.done(t._handleAfterSortable(function(){if(s){t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}else{t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.DELETE_TILE,[s||j,C,i,o.title]);}));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t));});sap.ushell.utils.handleTilesVisibility();f=true;return false;}});if(f){return false;}});},_sendDeleteTileRequest:function(G,t){var r,a=sap.ushell.Container.getService('LaunchPage');try{r=a.removeTile(G,t.object);}catch(e){jQuery.sap.log.error("deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e);}return r;},deleteCatalogTileFromGroup:function(d){var t=this,D=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),s=sap.ushell.Container.getService("LaunchPage"),a=jQuery.Deferred(),b=[],f,p,c;f=o.tiles.filter(function(T){var e=s.getCatalogTileId(T.object);if(e!==D){return true;}else{p=jQuery.Deferred();c=t._sendDeleteTileRequest(o.object,T);c.done((function(a){return function(){a.resolve({status:true});};})(p));c.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);return false;}});o.tiles=f;o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,true);jQuery.when.apply(jQuery,b).done(function(r){var S=true,i=0,e=b.length;for(i;i<e;i++){if(!r.status){S=false;break;}}if(S){t.oModel.setProperty("/groups/"+G,o);}a.resolve({group:o,status:S,action:'remove'});});return a.promise();},_moveTile:function(c,e,d){var n=d.toIndex,N=d.toGroupId,t=d.sTileId,s=d.source,T,a,o,b,f,h,i=sap.ushell.Container.getService("LaunchPage"),G=this.oModel.getProperty("/groups"),S,j,r,p;jQuery.each(G,function(k,l){var F=false;jQuery.each(l.tiles,function(m,q){if(q.uuid===t){T=q;a=m;o=l;b=k;F=true;return false;}});if(F){return false;}});jQuery.each(G,function(k,l){if(l.groupId===N){f=l;h=k;}});if(o.groupId==f.groupId&&(s==="moveDialog"||n===null)){return;}if(n&&n>f.tiles.length){n=f.tiles.length;}if(o.groupId===N){if(n===null||n===undefined){o.tiles.splice(a,1);n=o.tiles.length;o.tiles.push(T);}else{n=this._adjustTileIndex(n,T,o);this._moveInArray(o.tiles,a,n);}this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);}else{p=this.oModel.getProperty("/personalization");o.tiles.splice(a,1);o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);this.oModel.setProperty("/groups/"+b+"/tiles",o.tiles);if(n===null||n===undefined){n=f.tiles.length;f.tiles.push(T);}else{n=this._adjustTileIndex(n,T,f);f.tiles.splice(n,0,T);}f.visibilityModes=sap.ushell.utils.calcVisibilityModes(f,p);this.oModel.setProperty("/groups/"+h+"/tiles",f.tiles);}this.updateTilesAssociation();sap.ushell.utils.handleTilesVisibility();S=this.oModel.getProperty("/groups/"+b).object;j=this.oModel.getProperty("/groups/"+h).object;this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(T.object,a,n,S,j);}catch(k){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}T.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(t,l){var m,u=[i.getTileTitle(T.object),i.getGroupTitle(S),i.getGroupTitle(j),t];sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(this.analyticsConstants.PERSONALIZATION,this.analyticsConstants.MOVE_TILE,u);m=this._getPathOfTile(t);if(m){this.oModel.setProperty(m+"/object",l);this.oModel.setProperty(m+"/originalTileId",this.oPageBuilderService.getTileId(l));this._checkRequestQueue();this.oPageBuilderService.getTileView(l).done(function(v){var q=this.oModel.getProperty(m+"/content");this.oModel.setProperty(m+"/content",[v]);if(q&&q[0]){q[0].destroy();}this.oModel.setProperty(m+"/tileIsBeingMoved",false);}.bind(this));}},this,t)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));},this));},_adjustTileIndex:function(n,t,a){var v=0,I=false,i=0;for(i=0;i<a.tiles.length&&v<n;i++){if(a.tiles[i].isTileIntentSupported){if(a.tiles[i]===t){I=true;}else{v++;}}}if(I){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},loadAllCatalogs:function(c,e,d){var G=new jQuery.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.loadPersonalizedGroups();}this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];jQuery.sap.measure.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");jQuery.sap.measure.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");jQuery.sap.measure.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(a){jQuery.sap.measure.end("FLP:DashboardManager.GetCatalogsRequest");jQuery.sap.measure.end("FLP:DashboardManager.getCatalogTiles");jQuery.when.apply(jQuery,this.aPromises.concat([this.lastGroupTimeOutPromise])).then((function(){return t.onDoneLoadingCatalogs.bind(t);})(a));s();}.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},updateCatalogTilesToGroupsMap:function(){var c=this.getModel().getProperty("/catalogs"),i,t,a,G,C,b,d,e,A,o,s=sap.ushell.Container.getService("LaunchPage");if(c){for(i=0;i<c.length;i++){b=c[i].appBoxes;if(b){for(e=0;e<b.length;e++){A=b[e];t=encodeURIComponent(s.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];a=G?G:[];A.associatedGroups=a;}}C=c[i].customTiles;if(C){for(d=0;d<C.length;d++){o=C[d];t=encodeURIComponent(s.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];a=G?G:[];o.associatedGroups=a;}}}}this.getModel().setProperty("/catalogs",c);},_getIsIntentSupported:function(c){var s=sap.ushell.Container.getService("LaunchPage"),i=!!(s.isTileIntentSupported(c));return i;},_getIsAppBox:function(c){var s=sap.ushell.Container.getService("LaunchPage"),i=!!(s.getCatalogTileTargetURL(c)&&(s.getCatalogTilePreviewTitle(c)||s.getCatalogTilePreviewSubtitle(c)));return i;},createCatalogAppBoxes:function(c){var s=sap.ushell.Container.getService("LaunchPage"),a=encodeURIComponent(s.getCatalogTileId(c)),b=this.oTileCatalogToGroupsMap[a]||[],t=s.getCatalogTileTags(c)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}return{id:a,associatedGroups:b,src:c,title:s.getCatalogTilePreviewTitle(c),subtitle:s.getCatalogTilePreviewSubtitle(c),icon:s.getCatalogTilePreviewIcon(c),tags:t,url:s.getCatalogTileTargetURL(c)};},addCatalogToModel:function(c){var C=this.oModel.getProperty('/catalogs'),s=sap.ushell.Container.getService("LaunchPage"),a=s.getCatalogId(c),o={title:s.getCatalogTitle(c),id:s.getCatalogId(c),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]},p;C.forEach(function(b){if(b.id===a){return;}});jQuery.sap.measure.resume("FLP:DashboardManager.getCatalogTiles");p=s.getCatalogTiles(c);this.aPromises.push(p);p.done(function(b){jQuery.sap.measure.pause("FLP:DashboardManager.getCatalogTiles");if(!b.length){return;}this.aPendingCatalogQueue.push({oCatalogEntry:b,oCatalogModel:o});var d=new jQuery.Deferred();this.lastGroupTimeOutPromise=d.promise();clearTimeout(this.oprocessCatalogsTimer);this.oprocessCatalogsTimer=setTimeout(function(){this.processPendingCatalogs();d.resolve();}.bind(this),20);}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},processPendingCatalogs:function(){var t=this,c=this.oModel.getProperty('/catalogs'),p,C,o,e,i,a,b,d,E=sap.ui.getCore().getEventBus(),A,f=this.oModel.getProperty('/masterCatalogs')||[{title:g("all")}];jQuery.sap.measure.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");while(this.aPendingCatalogQueue.length>0){p=this.aPendingCatalogQueue.shift(),C=p.oCatalogEntry,o=p.oCatalogModel,e=this.searchModelCatalogByTitle(o.title),a=this.oModel.getProperty('/catalogSearchEntity');if(e.result){b=this.oModel.getProperty('/catalogs')[e.indexOfPreviousInstanceInModel];i=false;}else{i=true;b=o;}C.forEach(function(C,h){if(this._getIsIntentSupported(C)){if(this._getIsAppBox(C)){A=this.createCatalogAppBoxes(C);b.appBoxes.push(A);a.appBoxes.push(A);}else{d=this.createCatalogTiles(C);b.customTiles.push(d);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}this.aFnToGetTileView.push((function(C){return function(){var d=t.createCatalogTiles(C,true);a.customTiles.push(d);};})(C));}}}.bind(this));if(b.appBoxes.length>0||b.customTiles.length>0){if(i){c.push(o);f.push({title:o.title});}}}this.oModel.setProperty('/masterCatalogs',f);this.oModel.setProperty('/catalogs',c);E.publish("launchpad","afterCatalogSegment");jQuery.sap.measure.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},searchModelCatalogByTitle:function(c){var a=this.oModel.getProperty('/catalogs'),b=false,i,n=0,G=false;$.each(a,function(d,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(c==t.title){i=d;n=t.numberOfTiles;b=true;return false;}});return{result:b,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},getTagList:function(m){var i={},c=0,t=[],d,T,s;for(c=0;c<this.tagsPool.length;c++){T=this.tagsPool[c];if(i[T]){i[T]++;}else{i[T]=1;}}for(d in i){t.push({tag:d,occ:i[d]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(s.length===0){this.oModel.setProperty("/tagFiltering",false);}if(m){this.oModel.setProperty("/tagList",s.slice(0,m));}else{this.oModel.setProperty("/tagList",s);}},onDoneLoadingCatalogs:function(c){if(!c.length){this.oModel.setProperty("/catalogsNoDataText",sap.ushell.resources.i18n.getText('noCatalogs'));}var e=sap.ui.getCore().getEventBus();e.publish("launchpad","catalogContentLoaded");var s=sap.ushell.Container.getService("LaunchPage"),l=c.filter(function(C){return!s.getCatalogError(C);});if(l.length!==c.length){this._showLocalizedError("partialCatalogFail");}if(this.oModel.getProperty("/tagFiltering")===true){this.getTagList();}sap.ushell.utils.handleTilesVisibility();},createCatalogTiles:function(c,G){jQuery.sap.require('sap.ushell.ui.launchpad.TileState');var s=sap.ushell.Container.getService("LaunchPage"),t,a=encodeURIComponent(s.getCatalogTileId(c)),b=this.oTileCatalogToGroupsMap[a]||[],d=s.getCatalogTileTags(c)||[];if(d.length>0){this.tagsPool=this.tagsPool.concat(d);}t=new sap.ushell.ui.launchpad.TileState({state:"Loading"});if(G){s.getCatalogTileView(c);}return{associatedGroups:b,src:c,catalog:c.title,catalogId:c.id,title:s.getCatalogTileTitle(c),tags:d,keywords:G?(s.getCatalogTileKeywords(c)||[]).join(','):[],id:a,size:s.getCatalogTileSize(c),content:[t],isTileIntentSupported:s.isTileIntentSupported(c),tileType:c.tileType};},calculateCatalogTileIndex:function(c,n,t){var r=parseInt(c*100000,10);r+=(n!==undefined?n:0)+t;return r;},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,T,a,b,c;for(i=0;i<G.length;i++){o=G[i];T=o.tiles;if(T){for(t=0;t<T.length;++t){a=encodeURIComponent(s.getCatalogTileId(T[t].object));b=this.oTileCatalogToGroupsMap[a]||[];c=s.getGroupId(o.object);if(b.indexOf(c)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){b.push(c);}this.oTileCatalogToGroupsMap[a]=b;}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||sap.ushell.services.Message.Type.INFO,g(m,p),p);},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,sap.ushell.services.Message.Type.ERROR);},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p);};},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);t._requestFailed();setTimeout(function(){t.loadGroupsFromArray(G);});};},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(G,s){var a,o,S,b;for(a=0;a<s.length;a++){S=s[a];b=S.index;o=G[b];o.isRendered=true;o.tiles=o.tiles.concat(S.tiles);o.links=o.links.concat(S.links);}return G;},createGroupsModelFrame:function(G,p){var a,c=[],o,C;C=function(b){var d=jQuery.extend({},b);d.tiles=[];d.links=[];return d;};for(a=0;a<G.length;a++){o=G[a];c[a]=C(o);c[a].isRendered=false;c[a].visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);}return c;},_splitGroups:function(s,G,f){var a,t,b=s,p=f,c=[],d,e,h,i=["tiles","links"],o=1,C,j;C=function(k){var l=jQuery.extend({},k);l.tiles=[];l.links=[];return l;};for(a=0;a<G.length;a++){j=G[a];d=C(j);c.push(d);for(e=0;e<i.length;e++){h=i[e];o=this.PagingManager.getSizeofSupportedElementInUnits(h==='links'?'link':'tile');for(t=0;t<j[h].length;t++){if(p<=0){p=b;if(c){this.segmentsStore.push(c);}d=C(j);c=[];c.push(d);}d[h].push(j[h][t]);p-=o;}}}if(c){this.segmentsStore.push(c);}},_processSegment:function(m){var e=sap.ui.getCore().getEventBus(),a,b,t;if(this.segmentsStore.length>0){a=this.segmentsStore.shift();b=a[0].index;t=m[b].tiles.length+m[b].links.length;m=this._bindSegment(m,a);this.oModel.setProperty('/groups',m);this._updateModelWithTileView(b,t);this._handleSegment();}else{this._updateModelWithTileView(0,0);sap.ushell.utils.handleTilesVisibility();e.publish("launchpad","dashboardModelContentLoaded");}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},_handleSegment:function(){clearTimeout(this.oSegmentTimer);this.oSegmentTimer=setTimeout(function(){this._processSegment(this.oModel.getProperty('/groups'));}.bind(this),100);},loadGroupsFromArray:function(G){var t=this;jQuery.sap.measure.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");this.oPageBuilderService.getDefaultGroup().done(function(d){if(G.length==0&&d==undefined){return;}var i=0,l=[],b,a=G.indexOf(d),n,N,c=[],o,e,f,m,s,h,j,k={desktop:5,tablet:10,phone:15},p=0,q=0,r,u=0,D,v;G.splice(a,1);while(i<G.length){o=G[i];e=t.oPageBuilderService.isGroupLocked(o);if(e){l.push(o);G.splice(i,1);}else{i++;}}n=l.length;if(!t.oModel.getProperty('/disableSortedLockedGroups')){l.sort(function(x,y){var w=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),z=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return w<z?-1:1;});}b=l;b.push(d);b.push.apply(b,G);G=b;f=G.length;m=t.oModel.getProperty("/groups/length");t.oModel.setProperty("/groups/indexOfDefaultGroup",n);for(i=f;i<m;++i){t._destroyGroupModel("/groups/"+i);}if(!t.PagingManager){jQuery.sap.require("sap.ushell.components.flp.launchpad.PagingManager");t.PagingManager=new sap.ushell.components.flp.launchpad.PagingManager('dashboardPaging',{supportedElements:{tile:{className:'sapUshellTile'},link:{className:'sapUshellLinkTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});if(t.PagingManager.currentPageIndex===0){t.PagingManager.moveToNextPage();p=t.PagingManager._calcElementsPerPage();}}h=t.PagingManager.getSizeofSupportedElementInUnits('link');j=t.PagingManager.getSizeofSupportedElementInUnits('tile');jQuery.sap.measure.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<f;++i){N=t._getGroupModel(G[i],i===n,i===f-1);if(i==0){N.isGroupSelected=true;}N.index=i;u+=N.tiles.length*j+N.links.length*h;c.push(N);}jQuery.sap.measure.end("FLP:DashboardManager._getGroupModel");if(sap.ui.Device.system.desktop){q=k.desktop;}else if(sap.ui.Device.system.tablet){q=k.tablet;}else{q=k.phone;}s=(u-p)/q;if(s<14){s=14;}r=t.createGroupsModelFrame(c,t.oModel.getProperty("/personalization"));t._splitGroups(s,c,p);jQuery.sap.measure.start("FLP:DashboardManager._processSegment","_processSegment","FLP");t._processSegment(r);if(t.oModel.getProperty("/homePageGroupDisplay")&&t.oModel.getProperty("/homePageGroupDisplay")==='tabs'){D=t.getDashboardView();v=D.oDashboardGroupsBox;for(var i=0;i<r.length;i++){if(r[i].isGroupVisible&&r[i].visibilityModes[0]){t.oModel.setProperty("/groups/"+i+"/isGroupSelected",true);break;}}v.getBinding('groups').filter([D.oFilterSelectedGroup]);}jQuery.sap.measure.end("FLP:DashboardManager._processSegment");t.oModel.setProperty("/groups/length",r.length);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){}jQuery.sap.measure.end("FLP:DashboardManager.loadGroupsFromArray");}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},_loadGroup:function(n,G,h){var t=this,s="/groups/"+n,d=t.oModel.getProperty("/groups/indexOfDefaultGroup"),i=t.oModel.getProperty(s).isLastGroup,o,N;this._destroyGroupModel(s);o=this.oModel.getProperty(s+"/groupId");N=this._getGroupModel(G,n===d,i,undefined,h);if(o){N.groupId=o;}N.index=n;N.isRendered=true;this.oModel.setProperty(s,N);},_getGroupModel:function(G,d,l,D,h){var s=this.oPageBuilderService,a=(G&&s.getGroupTiles(G))||[],m=[],M=[],i,b,o=this.getModel();b=o.getProperty("/personalization");var c=G&&s.isGroupLocked(G)?true:false;for(i=0;i<a.length;++i){var t=a[i],T=s.getTileType(t).toLowerCase();if(T==="tile"){m.push(this._getTileModel(a[i],c,T,h));}else if(T==="link"){M.push(this._getTileModel(a[i],c,T,h));}else{jQuery.sap.log.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.flp.launchpad.DashboardManager");}}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||(D&&D.title)||"",object:G,groupId:jQuery.sap.uid(),links:M,tiles:m,isDefaultGroup:d||false,editMode:!G,isGroupLocked:c,visibilityModes:[true,true],removable:!G||s.isGroupRemovable(G),sortable:b,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d,isLastGroup:l||false,isRendered:D?!!D.isRendered:false,isGroupSelected:false};},_addTileToGroup:function(G,t){var T=G+"/tiles",o=this.oModel.getProperty(G),n=this.oModel.getProperty(T).length,s=this.oPageBuilderService,a=s.getTileType(t);var i=this.oModel.getProperty(G+"/isGroupLocked"),p=this.oModel.getProperty("/personalization");o.tiles[n]=this._getTileModel(t,i,a,this._addModelToTileViewUpdateQueue);o.visibilityModes=sap.ushell.utils.calcVisibilityModes(o,p);this._updateModelWithTileView(o.index,n);this.oModel.setProperty(G,o);},_addAndUpdateModelWithTileView:function(t,T){this._addModelToTileViewUpdateQueue(t,T);this._updateModelWithTileView(0,0);},_addModelToTileViewUpdateQueue:function(t,T){this.tileViewUpdateQueue.push({uuid:t,view:T});},_updateModelWithTileView:function(s,a){var t=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=setTimeout(function(){t.tileViewUpdateTimeoutID=undefined;t.oSortableDeferred.done(function(){t._updateModelWithTilesViews(s,a);});},50);},_updateModelWithTilesViews:function(s,a){var G=this.oModel.getProperty("/groups"),t,l,T,u,S,L,b=s||0,c=a||0,h=[];if(!G||this.tileViewUpdateQueue.length===0){return;}for(var i=b;i<G.length;i=i+1){t=G[i].tiles;l=G[i].links;t=t.concat(l);for(var j=c;j<t.length;j=j+1){T=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(T.uuid==u.uuid){h.push(q);if(u.view){T.content[0].destroy();T.content=[u.view];S=this.oPageBuilderService.getTileSize(T.object);L=((S!==null)&&(S==="1x2"))||false;if(T['long']!==L){T['long']=L;}}else{T.content[0].setState("Failed");}break;}}}}var d=[],e;for(e=0;e<this.tileViewUpdateQueue.length;e++){if(h.indexOf(e)===-1){d.push(this.tileViewUpdateQueue[e]);}}this.tileViewUpdateQueue=d;this.oModel.setProperty("/groups",G);},getModelTileById:function(i){var G=this.oModel.getProperty('/groups'),m;G.forEach(function(o){o.tiles.forEach(function(t){if(t.uuid===i||t.originalTileId===i){m=t;return;}});});return m;},_getTileModel:function(t,i,T,u){var s=this.oPageBuilderService,a=jQuery.sap.uid(),o,b=this,d,c,U;this.sTileType=T;s.setTileVisible(t,false);d=s.getTileView(t);d.done(function(v){o=v;if(U){U.apply(b,[a,o]);b._handleSegment();}});d.fail(function(){if(U){U.apply(b,[a]);b._handleSegment();}else{jQuery.sap.require('sap.ushell.ui.launchpad.TileState');if(b.sTileType==="link"){o=new sap.m.Link({text:sap.ushell.resources.i18n.getText('cannotLoadTile')});}else{o=new sap.ushell.ui.launchpad.TileState({state:"Failed"});}}});if(!o){U=u?u:this._addModelToTileViewUpdateQueue;jQuery.sap.require('sap.ushell.ui.launchpad.TileState');o=new sap.ushell.ui.launchpad.TileState({state:"Loading"});}if(T==="link"){c={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"isLocked":i};}else if(T==="tile"){var S=s.getTileSize(t);c={"object":t,"originalTileId":s.getTileId(t),"uuid":a,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"long":((S!==null)&&(S==="1x2"))||false,"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/tileActionsIconEnabled")||false};}return c;},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i]);}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t;if(G){this._destroyAllTileModels(G.tiles);}},_destroyAllTileModels:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T){for(i=0;i<T.length;i=i+1){this._destroyTileModel(T[i]);}}},_destroyTileModel:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T&&T.content){for(i=0;i<T.content.length;i=i+1){T.content[i].destroy();}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups(),d=new jQuery.Deferred();G.done(function(a){t.loadGroupsFromArray(a);d.resolve();});G.fail(function(){t._showLocalizedErrorHelper("fail_to_load_groups_msg")();d.reject();});return d;}});}());},"sap/ushell/components/flp/launchpad/PagingManager.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.PagingManager");sap.ui.base.EventProvider.extend("sap.ushell.components.flp.launchpad.PagingManager",{metadata:{publicMethods:["setElementClass","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components.flp.launchpad.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.supportedElements=c;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery('body').append(e);var a=e.height();var b=e.width();if(a<20||b<40){b=40;a=20;}e.remove();return{width:b,height:a};},_calcElementsPerPage:function(){var s,b,a,m,a,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}});}());},"sap/ushell/components/flp/launchpad/appfinder/AppFinder.controller.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.AccessibilityCustomData");sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.AppFinder",{onInit:function(){sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem('backBtn',true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem('homeBtn',true);});var v=this.getView(),m=v.getModel(),s=v.showEasyAccessMenu;if(!m.getProperty("/groups")||m.getProperty("/groups").length===0){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadPersonalizedGroups();}this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=v.parentComponent.getComponentData().config;this.catalogView=sap.ui.view("catalogView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.Catalog",height:"100%",viewData:{parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel()}});this.catalogView.addStyleClass('sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce');this._addViewCustomData(this.catalogView,"appFinderCatalogTitle");this.oRouter=this.getView().parentComponent.getRouter();this.oRouter.getRoute("catalog").attachPatternMatched(function(e){this._navigateTo.apply(this,["appFinder","catalog"]);}.bind(this));this.oRouter.getRoute("appFinder").attachPatternMatched(function(e){this._preloadAppHandler();this._getPathAndHandleGroupContext(e);v.createSubHeader();this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(s){this.onShow(e);}else if(this.getView()._showSearch('catalog')){v.updateSubHeader('catalog',false);this._toggleViewWithSearchAndTagsClasses('catalog');}sap.ui.getCore().getEventBus().publish("showCatalog");}.bind(this));if(!s){v.oPage.addContent(this.catalogView);setTimeout(function(){jQuery('#catalogSelect').focus();},0);}sap.ui.Device.resize.attachHandler(this._resizeHandler.bind(this));},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var c=this.oSubHeaderModel.getProperty('/openCloseSplitAppButtonVisible');if(s!=c){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',s);if(s){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);}}this._toggleViewWithToggleButtonClass(s);},_showOpenCloseSplitAppButton:function(){return!sap.ui.Device.orientation.landscape||sap.ui.Device.system.phone;},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty('/activeMenu',null);this.oSubHeaderModel.setProperty('/search',{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty('/tag',{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonVisible',this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new sap.ui.model.json.JSONModel();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel('subHeaderModel'),S=e.getSource().getSelectedItems(),T=S.length>0,o={tagMode:T,selectedTags:[]};S.forEach(function(a,i){o.selectedTags.push(a.getText());});s.setProperty('/activeMenu',this.getCurrentMenuName());s.setProperty('/tag',o);},searchHandler:function(e){var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.loadCustomTilesKeyWords();var s=e.getSource().getValue();if(!s){return;}var S=this.oSubHeaderModel.getProperty('/search');var a=this.oSubHeaderModel.getProperty('/activeMenu');if(this.getCurrentMenuName()!=a){a=this.getCurrentMenuName();}if(!S.searchMode&&!e.getParameter('clearButtonPressed')){S.searchMode=true;}if(S.searchMode&&sap.ui.Device.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!=S.searchTerm){if(this.containsOnlyWhiteSpac(s)){s='*';}S.searchTerm=s;}this.oSubHeaderModel.setProperty("/search",S);this.oSubHeaderModel.setProperty("/activeMenu",a);this.oSubHeaderModel.refresh(true);},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n,m){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){this.oRouter.navTo(n,{'menu':m,filters:JSON.stringify({targetGroup:encodeURIComponent(G)})},true);}else{this.oRouter.navTo(n,{'menu':m},true);}},getSystemsModel:function(){if(this.getSystemsPromise){return this.getSystemsPromise;}var e=new sap.ui.model.json.JSONModel();e.setProperty('/systemSelected',null);e.setProperty('/systemsList',[]);this.getSystemsPromise=this.getSystems().then(function(r){e.setProperty("/systemsList",r);return e;});return this.getSystemsPromise;},onSegmentButtonClick:function(e){switch(e.getParameters().id){case"catalog":this._navigateTo("appFinder","catalog");break;case"userMenu":this._navigateTo("appFinder","userMenu");break;case"sapMenu":this._navigateTo("appFinder","sapMenu");break;}},onShow:function(e){var p=e.getParameter('arguments');var m=p.menu;var f=p.filters;if(m===this.getCurrentMenuName()&&f){return;}var v=this.getView();v._updateSearchWithPlaceHolder(m);this._updateCurrentMenuName(m);this.getSystemsModel().then(function(s){var a=s.getProperty("/systemsList");v.oPage.removeAllContent();if(a&&a.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==='catalog'){v.oPage.addContent(this.catalogView);}else if(this.currentMenu==='userMenu'){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});this._addViewCustomData(this.userMenuView,"appFinderUserMenuTitle");}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==='sapMenu'){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});this._addViewCustomData(this.sapMenuView,"appFinderSapMenuTitle");}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(a);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){var v=this.getView();if(!v.showEasyAccessMenu||(m==="sapMenu"&&!v.enableEasyAccessSAPMenu)||(m==="userMenu"&&!v.enableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass('sapUshellAppFinderSearch');}else{v.oPage.removeStyleClass('sapUshellAppFinderSearch');}if(v._showSearchTag(m)){v.oPage.addStyleClass('sapUshellAppFinderTags');}else{v.oPage.removeStyleClass('sapUshellAppFinderTags');}},_toggleViewWithToggleButtonClass:function(b){var v=this.getView();if(b){v.oPage.addStyleClass('sapUshellAppFinderToggleButton');}else{v.oPage.removeStyleClass('sapUshellAppFinderToggleButton');}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var b=v.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+b).focus();},0);}else{setTimeout(function(){jQuery('#catalogSelect').focus();},0);}},_getPathAndHandleGroupContext:function(e){var p=e.getParameter('arguments');var d=p.filters;var D=d?JSON.parse(d):d;var P=(D&&decodeURIComponent(D.targetGroup))||"";P=P==='undefined'?undefined:P;this._updateModelWithGroupContext(P);},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.oView.getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},getSystems:function(){var d=new jQuery.Deferred();var s=[];var c=sap.ushell.Container.getService("ClientSideTargetResolution");if(!c){d.reject("cannot get ClientSideTargetResolution service");}else{c.getEasyAccessSystems().done(function(S){var a=Object.keys(S);for(var i=0;i<a.length;i++){var C=a[i];s[i]={"systemName":S[C].text,"systemId":C};}d.resolve(s);}).fail(function(e){d.reject("An error occurred while retrieving the systems: "+e);});}return d.promise();},_addViewCustomData:function(v,t){var r=sap.ushell.resources.i18n;v.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));v.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:r.getText(t),writeToDom:true}));},_initializeShellUIService:function(){jQuery.sap.require("sap.ushell.ui5service.ShellUIService");this.oShellUIService=new sap.ushell.ui5service.ShellUIService({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy([{icon:'sap-icon://home',title:'Home',intent:'#'}]);},containsOnlyWhiteSpac:function(t){if(!t||t==="")return false;var T=t;return(!T.replace(/\s/g,'').length)}});}());},"sap/ushell/components/flp/launchpad/appfinder/AppFinder.view.js":function(){(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.AppFinder",{createContent:function(){this.oController=this.getController();this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.setModel(this.parentComponent.getModel());this.enableEasyAccessSAPMenu=this.getModel().getProperty("/enableEasyAccessSAPMenu");this.enableEasyAccessUserMenu=this.getModel().getProperty("/enableEasyAccessUserMenu");if((!this.enableEasyAccessSAPMenu&&!this.enableEasyAccessUserMenu)||(sap.ui.Device.system.phone||sap.ui.Device.system.tablet&&(!sap.ui.Device.system.combi))){this.showEasyAccessMenu=false;}else{this.showEasyAccessMenu=true;}var r=sap.ushell.resources.i18n;this.oPage=new sap.m.Page("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?r.getText("appFinderTitle"):r.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var M="searchFiltering";if(m==="userMenu"){M="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){M="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+M);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}else{return this.getModel().getProperty("/tagFiltering");}},onAfterHide:function(){var c=this.getController();var r=c.oSubHeaderModel.getProperty("/search/searchMode")||c.oSubHeaderModel.getProperty("/search/searchTerm");if(r){c._resetSubHeaderModel();this.oAppFinderSearchControl.setValue("");}},createSubHeader:function(){if(!this.oToolbar){this.oToolbar=new sap.m.Toolbar("appFinderSubHeader",{});this.oToolbar.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipforward:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}},onAfterRendering:function(){jQuery("#catalog").attr("accesskey","a");}});this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.oToolbar.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"2",writeToDom:true}));this.oToolbar.addStyleClass('sapUshellAppFinderHeader');this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);}if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new sap.m.ToggleButton("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',e.getSource().getPressed());}.bind(this)});this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,e){this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(e){var s=this.createSegmentedButtons(m);this.oPage.addStyleClass('sapUshellAppFinderWithEasyAccess');this.oToolbar.addContent(s);}if(this._showSearch(m)){var a=this.createSearchControl(m);this.oToolbar.addContent(a);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){if(this.segmentedButton){this.segmentedButton.setSelectedButton(m);return this.segmentedButton;}var c=this.getController();var r=sap.ushell.resources.i18n;var s=[];s.push(new sap.m.Button("catalog",{text:r.getText("appFinderCatalogTitle"),press:function(e){c.onSegmentButtonClick(e);}}));if(this.enableEasyAccessUserMenu){s.push(new sap.m.Button('userMenu',{text:r.getText("appFinderUserMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}if(this.enableEasyAccessSAPMenu){s.push(new sap.m.Button('sapMenu',{text:r.getText("appFinderSapMenuTitle"),press:function(e){c.onSegmentButtonClick(e);}}));}this.segmentedButton=new sap.m.SegmentedButton("appFinderSegmentedButtons",{buttons:s});this.segmentedButton.addEventDelegate({onsaptabprevious:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!o.getVisible()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}});this.segmentedButton.setSelectedButton(m);var b=this.segmentedButton.getButtons();for(var i=0;i<b.length;i++){var a=b[i];a.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:a.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery('#appFinderSearch input').select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new sap.m.FlexBox("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m=='catalog'&&this._showSearchTag('catalog')){this.createTagControl();this.oAppFinderSearchContainer.addItem(this.oAppFinderTagFilter);}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new sap.m.SearchField("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:'subHeaderModel>/search/searchTerm',mode:sap.ui.model.BindingMode.OneWay}}).addStyleClass('help-id-catalogSearch');this.oAppFinderSearchControl.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-controls",value:"",writeToDom:true}));this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}}});}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==='catalog'){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==='userMenu'){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==='sapMenu'){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(sap.ushell.resources.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(sap.ushell.resources.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}this.oAppFinderTagFilter=new sap.m.MultiComboBox("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",items:{path:"/tagList",sorter:new sap.ui.model.Sorter("tag",false,false),template:new sap.ui.core.ListItem({text:"{tag}",key:"{tag}"})},selectionChange:[this.oController.onTagsFilter,this.oController]}).addStyleClass('help-id-catalogTagFilter');return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.AppFinder";}});}());},"sap/ushell/components/flp/launchpad/appfinder/Catalog.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.oMainModel=this.oView.getModel();this.oSubHeaderModel=this.oView.getModel("subHeaderModel");var t=this,s=this.oSubHeaderModel.bindProperty("/tag/selectedTags"),S=this.oSubHeaderModel.bindProperty("/search"),T=this.oSubHeaderModel.bindProperty("/tag/tagMode");sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var r=this.getView().parentComponent.getRouter();r.getRoute("catalog").attachPatternMatched(function(e){t.onShow(e);});r.getRoute("appFinder").attachPatternMatched(function(e){t.onShow(e);});this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;S.attachChange(t.handleSearchModelChanged.bind(this));s.attachChange(t.handleSearchModelChanged.bind(this));T.attachChange(t.handleSearchModelChanged.bind(this));var o=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");o.attachChange(t.handleToggleButtonModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){var m=this.getView().getModel(),c=m.getProperty('/catalogs'),t=this;if(!c.length){}else if(c[0].title!=sap.ushell.resources.i18n.getText('catalogsLoading')){}if(!this.PagingManager){this.lastCatalogId=0;jQuery.sap.require("sap.ushell.components.flp.launchpad.PagingManager");this.PagingManager=new sap.ushell.components.flp.launchpad.PagingManager('catalogPaging',{supportedElements:{tile:{className:'sapUshellTile'}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.getView().getCatalogContainer().setPagingManager(this.PagingManager);}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage();}jQuery(window).resize(function(){var w=$(window).width(),a=$(window).height();t.PagingManager.setContainerSize(w,a);t.resetPageFilter();});},_decodeUrlFilteringParameters:function(u){var U=u?JSON.parse(u):u,h=(U&&U.tagFilter&&U.tagFilter)||"";if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(U&&U.catalogSelector&&U.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(U&&U.tileFilter&&U.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(){if(this.categoryFilter){this.categoryFilter=sap.ushell.resources.i18n.getText('all')===this.categoryFilter?'':this.categoryFilter;this.getView().getModel().setProperty("/categoryFilter",this.categoryFilter);return;}if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,'');this.oSubHeaderModel.setProperty('/search',{searchMode:true,searchTerm:this.searchFilter});}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty('/tag',{tagMode:true,selectedTags:this.tagFilter});}},onShow:function(e){var v,u=e.getParameter('arguments').filters;v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}$.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);this._applyFilters();},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements();this.getView().getCatalogContainer().setCategoryAllocateTiles(this.allocateTiles);},allocateNextPage:function(){var c=this.getView().getCatalogContainer();if(!this.nAllocatedTiles||this.nAllocatedTiles===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();c.setCategoryAllocateTiles(this.allocateTiles);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:f,targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)},true);},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify(p)},true);},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter,tileFilter:f?encodeURIComponent(f):"",tagFilter:JSON.stringify(this.tagFilter),targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog','filters':JSON.stringify(p)});},getGroupContext:function(){var m=this.getView().getModel(),g=m.getProperty("/groupContext/path");return g?g:"";},_isTagFilteringChanged:function(s){var S=s.length===this.tagFilter.length,i=S;if(!i){return true;}s.some(function(t,I){i=jQuery.inArray(t,this.tagFilter)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,S){var u={tileFilter:s&&s.length?encodeURIComponent(s):'',tagFilter:S.length?JSON.stringify(S):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog','filters':JSON.stringify(u)});},handleSearchModelChanged:function(){var a=this.oSubHeaderModel.getProperty('/activeMenu'),s=this.oSubHeaderModel.getProperty('/search/searchMode'),t=this.oSubHeaderModel.getProperty('/tag/tagMode'),p,S=this.oSubHeaderModel.getProperty('/search/searchTerm'),b=this.oSubHeaderModel.getProperty('/tag/selectedTags'),o,f=[],c;if(this.oView.getId().indexOf(a)!==-1){if(s||t){this.oView.setCategoryFilterSelection();if(!this.oView.oCatalogEntrySearchContainer.getBinding("customTilesContainer")){this.oView.oCatalogEntrySearchContainer.bindAggregation("customTilesContainer",{path:"/catalogSearchEntity/customTiles",template:this.oView.oTileTemplate,templateShareable:true});}if(!this.oView.oCatalogEntrySearchContainer.getBinding("appBoxesContainer")){this.oView.oCatalogEntrySearchContainer.bindAggregation("appBoxesContainer",{path:"/catalogSearchEntity/appBoxes",template:this.oView.oAppBoxesTemplate,templateShareable:true});}if(b&&b.length>0){o=new sap.ui.model.Filter('tags','EQ','v');o.fnTest=function(T){var i,h;if(b.length===0){return true;}for(i=0;i<b.length;i++){h=b[i];if(T.indexOf(h)!==-1){return true;}}return false;}.bind(this);f.push(o);}S=S?S.replace(/\*/g,''):S;if(S){var d=S.split(/[\s,]+/);var k=new sap.ui.model.Filter(jQuery.map(d,function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v));}),true);var e=new sap.ui.model.Filter($.map(d,function(v){return(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v));}),true);var g=new sap.ui.model.Filter($.map(d,function(v){return(v&&new sap.ui.model.Filter("subtitle",sap.ui.model.FilterOperator.Contains,v));}),true);f.push(k);f.push(e);f.push(g);}this.oView.oCatalogEntrySearchContainer.getBinding("customTilesContainer").filter(f);this.oView.oCatalogEntrySearchContainer.getBinding("appBoxesContainer").filter(f);c=this.oView.oCatalogEntrySearchContainer.getNumberResults();this.bSearchResults=(c.nAppboxes+c.nCustom>0);this.oView.oCatalogEntrySearchContainer.setAfterHandleElements(function(i){var n=i.getNumberResults();this.bSearchResults=(n.nAppboxes+n.nCustom>0);this.oView.splitApp.toDetail(this.getView()._calculateDetailPageId());}.bind(this));this._showHideSelectedMasterItem(false);if(this._isTagFilteringChanged(b)){this._setUrlWithTagsAndSearchTerm(S,b);}}else{this._showHideSelectedMasterItem(true);this.setCategoryFilter(this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);}else{this._restoreSelectedMasterItem();}},_showHideSelectedMasterItem:function(i){var c=this.oView.splitApp.getMasterPage('catalogSelect'),C=c.getSelectedItem();if(C){C.toggleStyleClass("sapUshellHideSelectedListItem",!i);}},_restoreSelectedMasterItem:function(){var c=this.oView.splitApp.getMasterPage('catalogSelect'),o=sap.ui.getCore().byId(this.selectedCategoryId);if(o){this.categoryFilter=o.getTitle();}c.setSelectedItem(o);},handleToggleButtonModelChanged:function(){var b=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible"),B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(B!=this.bCurrentButtonToggled){if(!sap.ui.Device.system.phone){if(b){if(B&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}}else{if(b){if(B&&!this.oView.splitApp.isMasterShown()){var c=sap.ui.getCore().byId('catalogSelect');this.oView.splitApp.backMaster(c);}else if(this.oView.splitApp.isMasterShown()){var d=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(d);}}}}this.bCurrentButtonToggled=B;},applyTileFilters:function(){var f=[],s;if(this.tagFilter){this.getView().getModel().setProperty("/tagFilter",this.tagFilter);}this.searchFilter=this.searchFilter?this.searchFilter.replace(/\*/g,''):this.searchFilter;if(this.searchFilter){s=new sap.ui.model.Filter($.map(this.searchFilter.split(/[\s,]+/),function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v))||(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v))||undefined;}),true);f.push(s);}if(this.categoryFilter){this.getView().getModel().setProperty("/categoryFilter",this.categoryFilter===sap.ushell.resources.i18n.getText("all")?"":this.categoryFilter);}f.push(new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true));if(this.oRenderingFilter){f.push(this.oRenderingFilter);}},onLiveFilter:function(e){clearTimeout(this.timeoutId);var t=this,q=e.getParameter("newValue"),n=300;this.timeoutId=setTimeout(r,n,q);function r(q){if(q){t.setSearchFilter(q);}else{t.setSearchFilter();}}},onTagsFilter:function(e){var s=e.getParameters("selectedItem").changedItem;var s=e.getParameters("selectedItem").changedItem,a=e.getParameter("selected"),b=[],c=s.getText();if(this.tagFilter){b=this.tagFilter;}if(a){b.push(c);}else{b=b.filter(function(d){return d!==c;});}this.setTagsFilter(b.length>0?JSON.stringify(b):"");},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);this.oSubHeaderModel.setProperty('/search/searchMode',false);this.oSubHeaderModel.setProperty('/tag/tagMode',false);if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet){this.oSubHeaderModel.setProperty('/openCloseSplitAppButtonToggled',false);}this.handleSearchModelChanged();},onCategoryFilter:function(e){var m=e.getSource(),s=m.getSelectedItem(),S=s.getBindingContext(),M=S.getModel();if(M.getProperty("static",S)){M.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{M.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=jQuery(e.oSource.getDomRef()),a=j.find(".sapMGT");a.attr("tabindex","-1");},catalogTilePress:function(c){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var a=e.getSource(),t=a.getBindingContext().getObject(),p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=a.getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}}},onTilePinButtonClick:function(e){var c=e.getSource(),s=c.getBindingContext(),m=this.getView().getModel(),g=m.getProperty("/groupContext/path");if(g){this._handleTileFooterClickInGroupContext(s,g);}else{var a=m.getProperty("/groups");var l=sap.ushell.Container.getService("LaunchPage");var b=this.getCatalogTileDataFromModel(s);var t=b.tileData.associatedGroups;var d=a.map(function(f){var r=l.getGroupId(f.object);var h=!($.inArray(r,t)==-1);return{selected:h,initiallySelected:h,oGroup:f};});var p=new sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",viewData:{groupData:d,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp")}});p.open(c).then(this._handlePopoverResponse.bind(this,s,b));}},_handlePopoverResponse:function(s,c,r){if(!r.addToGroups.length&&!r.newGroups.length&&!r.removeFromGroups.length){return;}var m=this.getView().getModel();var g=m.getProperty("/groups");var p=[];r.addToGroups.forEach(function(a){var i=g.indexOf(a);var G=new sap.ui.model.Context(m,"/groups/"+i);var b=this._addTile(s,G);p.push(b);}.bind(this));r.removeFromGroups.forEach(function(a){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(a);var b=this._removeTile(t,i);p.push(b);}.bind(this));r.newGroups.forEach(function(a){var n=(a.length>0)?a:sap.ushell.resources.i18n.getText("new_group_name");var b=this._createGroupAndSaveTile(s,n);p.push(b);}.bind(this));jQuery.when.apply(jQuery,p).then(function(){var a=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(c,r,a);}.bind(this));},_handlePopoverGroupsActionPromises:function(c,p,r){var e=r.filter(function(g,i,r){return!g.status;});if(e.length){var E=this.prepareErrorMessage(e,c.tileData.title);var d=sap.ushell.components.flp.launchpad.DashboardManager();d.resetGroupsOnFailure(E.messageId,E.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(g){if(g.selected){var h=l.getGroupId(g.oGroup.object);t.push(h);}});var m=this.getView().getModel();if(p.newGroups.length){var a=m.getProperty("/groups");var n=a.slice(a.length-p.newGroups.length);n.forEach(function(g){var h=l.getGroupId(g.object);t.push(h);});}m.setProperty(c.bindingContextPath+"/associatedGroups",t);var f=(!!p.addToGroups[0])?p.addToGroups[0].title:"";if(!f.length&&p.newGroups.length){f=p.newGroups[0];}var b=(!!p.removeFromGroups[0])?p.removeFromGroups[0].title:"";var D=this.prepareDetailedMessage(c.tileData.title,p.addToGroups.length+p.newGroups.length,p.removeFromGroups.length,f,b);sap.m.MessageToast.show(D,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return b;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),c=this.getCatalogTileDataFromModel(s),a=c.tileData.associatedGroups,G=m.getProperty(g),b=l.getGroupId(G.object),C=$.inArray(b,a),t=this._getCatalogTileIndexInModel(s),o,A,r,T,d,e=this;if(c.isBeingProcessed){return;}m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',true);if(C==-1){o=new sap.ui.model.Context(s.getModel(),g);A=this._addTile(s,o);A.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,true);}else{e._groupContextOperationFailed(c,G,true);}});A.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}else{T=s.getModel().getProperty(s.getPath()).id;d=g.split('/')[2];r=this._removeTile(T,d);r.done(function(f){if(f.status==1){e._groupContextOperationSucceeded(s,c,G,false);}else{e._groupContextOperationFailed(c,G,false);}});r.always(function(){m.setProperty('/catalogTiles/'+t+'/isBeingProcessed',false);});}},_groupContextOperationSucceeded:function(s,c,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),a=c.tileData.associatedGroups,d,i;if(t){a.push(G);s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,1,0,g.title,"");}else{for(i in a){if(a[i]==G){a.splice(i,1);break;}}s.getModel().setProperty(c.bindingContextPath+"/associatedGroups",a);d=this.prepareDetailedMessage(c.tileData.title,0,1,"",g.title);}sap.m.MessageToast.show(d,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(c,g,t){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),e;if(t){e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[c.tileData.title,g.title]});}else{e=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[c.tileData.title,g.title]});}d.resetGroupsOnFailure(e.messageId,e.parameters);},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title;}}else if(a=='remove'){N++;if(N==1){F=g.title;}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]});}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}return m;},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a]);}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a]);}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b]);}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a]);}}return m;},getCatalogTileDataFromModel:function(s){var b=s.getPath(),m=s.getModel(),t=m.getProperty(b);return{tileData:t,bindingContextPath:b,isBeingProcessed:t.isBeingProcessed?true:false};},_addTile:function(t,g){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b);});return a;},_removeTile:function(t,i){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b);});return a;},_createGroupAndSaveTile:function(t,n){var d=sap.ushell.components.flp.launchpad.getDashboardManager(),a=jQuery.Deferred(),p=d.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b);});return a;}});}());},"sap/ushell/components/flp/launchpad/appfinder/Catalog.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.ui.launchpad.CatalogTileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Panel");jQuery.sap.require("sap.ui.core.HTML");jQuery.sap.require("sap.ushell.ui.appfinder.AppBox");jQuery.sap.require("sap.ushell.ui.launchpad.TileContainerUtils");jQuery.sap.require("sap.ushell.ui.launchpad.CatalogEntryContainer");jQuery.sap.require("sap.ushell.ui.launchpad.CatalogsContainer");jQuery.sap.require("sap.ushell.ui.appfinder.PinButton");sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.Catalog",{oController:null,createContent:function(c){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oController=c;function i(l){return((l!==null)&&(l==="1x2"||l==="2x2"))||false;}function a(v){return parseInt(v,10)||0;}function g(e,l,G,n,p,q){var r;if(n){var R=sap.ushell.resources.i18n,v=$.inArray(p,G);r=R.getText(v!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",q);}else{r=G&&G.length?l:e;}return r;}var T=new sap.ushell.ui.appfinder.PinButton({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,l,G,n){if(G){var p=$.inArray(n,e);return p!==-1;}else{return!!l;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,l,G,n,p,q,r){return g(e,l,G,p,q,r);}},press:[c.onTilePinButtonClick,c]});var A=new sap.ushell.ui.appfinder.PinButton({icon:'sap-icon://pushpin-off',selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,l,G,n){if(G){var p=$.inArray(n,e);return p!==-1;}else{return!!l;}}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,l,G,n,p,q,r){return g(e,l,G,p,q,r);}},press:[c.onTilePinButtonClick,c]});this.oAppBoxesTemplate=new sap.ushell.ui.appfinder.AppBox({title:'{title}',icon:'{icon}',subtitle:'{subtitle}',url:'{url}',pinButton:A,press:[c.onAppBoxPressed,c]});A.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));A.addStyleClass("sapUshellPinButton");T.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));T.addStyleClass("sapUshellPinButton");this.oTileTemplate=new sap.ushell.ui.launchpad.Tile({tileViews:{path:"content",factory:function(I,e){return e.getObject();}},"long":{path:"size",formatter:i},index:{path:"id",formatter:a},tileCatalogId:"{id}",pinButton:T,press:[c.catalogTilePress,c],afterRendering:c.onTileAfterRendering});this.oCatalogSelect=new sap.m.List("catalogSelect",{visible:"{/catalogSelection}",name:"Browse",tooltip:"{i18n>catalogSelect_tooltip}",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new sap.m.StandardListItem({type:"Active",title:"{title}"})},showNoData:false,itemPress:[c._handleCatalogListItemPress,c]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var o=this.oCatalogSelect.onAfterRendering;this.oCatalogSelect.addEventDelegate({onsaptabnext:function(l){try{l.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(l){try{l.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(l){try{l.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var n=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(n.getVisible()){n.focus();}else{sap.ushell.components.flp.ComponentKeysHandler.appFinderFocusMenuButtons(l);}}catch(e){}}});if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass('help-id-catalogCategorySelect');}this.setCategoryFilterSelection=function(S){var e=t.getCatalogSelect(),l=e.getItems(),n=t.oController.oSubHeaderModel.getProperty('/tag/tagMode'),p=t.oController.oSubHeaderModel.getProperty('/search/searchMode'),q=S;if(p||n){e.setSelectedItem();}else{l.forEach(function(L,r){if(L.getTitle()===q){e.setSelectedItem(L);}});}};this.oCatalogSelect.onAfterRendering=function(){var S=t.oController.categoryFilter||sap.ushell.resources.i18n.getText('all');t.setCategoryFilterSelection(S);if(o){o.apply(this,arguments);}setTimeout(function(){var e=jQuery("#catalog, #userMenu, #sapMenu").filter("[tabindex=0]");if(e.length){e.eq(0).focus();}else{jQuery("#catalog").focus();}},0);};var b=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(b){b.apply(this,arguments);}};var E=sap.ui.getCore().getEventBus(),d,u=function(){this.splitApp.toMaster('catalogSelect','show');if(!sap.ui.Device.system.phone){d=this._calculateDetailPageId();if(d!=this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(d);}}};E.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(u.bind(this),500);},this);E.subscribe("launchpad","afterCatalogSegment",u,this);var f=new sap.ui.core.HTML("sapUshellCatalogAccessibilityTileText",{content:"<div style='height: 0px; width: 0px; overflow: hidden; float: left;'>"+sap.ushell.resources.i18n.getText("tile")+"</div>"});var C=new sap.ushell.ui.launchpad.CatalogEntryContainer({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new sap.m.MessagePage({visible:true,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});this.oCatalogsContainer=new sap.ushell.ui.launchpad.CatalogsContainer("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:C},busy:true});this.oCatalogsContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var l=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader"),n=jQuery(e.srcControl.getDomRef());if(l.getVisible()&&!l.getPressed()&&!n.hasClass("sapUshellPinButton")){e.preventDefault();var p=sap.ui.getCore().byId("appFinderSearch");p.focus();}},onsapskipback:function(e){var l=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(l.getVisible()&&!l.getPressed()){e.preventDefault();l.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId('catalogTilesDetailedPage');if(!this.getBusy()){e.setBusy(false);jQuery.sap.measure.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}jQuery("#catalogTilesDetailedPage-cont").scroll(function(){var p=sap.ui.getCore().byId('catalogTilesDetailedPage'),l=p.getScrollDelegate(),n=l.getScrollTop(),q=l.getMaxScrollTop();if(q-n<=30+t.oController.PagingManager.getTileHeight()){t.oController.allocateNextPage();}});};this.oCatalogEntrySearchContainer=new sap.ushell.ui.launchpad.CatalogEntryContainer({header:"{i18n>results_count}"});this.oCatalogEntrySearchContainer.addStyleClass('sapUshellCatalogTileContainer');this.oCatalogsSearchContainer=new sap.ushell.ui.launchpad.CatalogsContainer("catalogSearchContainer",{catalogs:[this.oCatalogEntrySearchContainer]});this.wrapCatalogsContainerInDetailPage=function(e,I){var D=new sap.m.Page(I,{showHeader:false,showFooter:false,showNavButton:false,content:[new sap.ushell.ui.launchpad.Panel({translucent:true,content:e}).addStyleClass("sapUshellCatalogPage")]});return D},this.getCatalogContainer=function(){return this.oCatalogsContainer;};new sap.m.Page({showHeader:false,showFooter:false,showNavButton:false,content:[new sap.ushell.ui.launchpad.Panel({translucent:true,content:[f,this.getCatalogContainer()]}).addStyleClass("sapUshellCatalogPage")]});var h=this.wrapCatalogsContainerInDetailPage([f,this.getCatalogContainer()],'catalogTilesDetailedPage'),j=new sap.m.Page('catalogMessagePage',{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]}),k=this.wrapCatalogsContainerInDetailPage([this.oCatalogsSearchContainer],'catalogTilesSearchPage');var s=new sap.m.BusyIndicator('catalogSelectBusyIndicator',{size:"1rem"});this.splitApp=new sap.m.SplitApp('catalogViewMasterDetail',{masterPages:[s,this.oCatalogSelect],detailPages:[h,k,j]});document.toSearch=function(){this.splitApp.toDetail('catalogTilesSearchPage');}.bind(this);document.toDetail=function(){this.splitApp.toDetail('catalogTilesDetailedPage');}.bind(this);document.toMessage=function(){this.splitApp.toDetail('catalogMessagePage');}.bind(this);return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel('subHeaderModel');var S=s.getProperty('/search/searchMode');var t=s.getProperty('/tag/tagMode');var c=this.getModel().getProperty("/catalogs");var i;if(S||t){i=this.getController().bSearchResults?'catalogTilesSearchPage':'catalogMessagePage';}else if(c&&!c.length){i="catalogMessagePage";}else{i="catalogTilesDetailedPage";}return i;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.Catalog";}});}());},"sap/ushell/components/flp/launchpad/appfinder/EasyAccess.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new sap.ui.model.json.JSONModel();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p?p:"/");if(typeof e.folders!="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,r){this.easyAccessModel.setProperty(p+"/folders",r.folders);this.easyAccessModel.setProperty(p+"/apps",r.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(a){this.handleGetMenuItemsError(a);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new sap.ui.model.json.JSONModel();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(r){this.easyAccessSearchResultsModel.setProperty("/apps",r.results);this.easyAccessSearchResultsModel.setProperty("/total",r.count);this.searchResultFrom=r.results.length+1;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(r.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(r){var c=this.easyAccessSearchResultsModel.getProperty("/apps");var n=c.slice();Array.prototype.push.apply(n,r.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false)}this.searchResultFrom=n.length+1;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}}.bind(this));},_getSearchResults:function(s,f){var d=new jQuery.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var r={requestUri:S};var c=this._callODataService(r,this.handleSuccessOnReadFilterResults);c.done(function(a){d.resolve(a);});c.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}return;},adjustUiOnSystemChange:function(){var c=this.easyAccessModel.getData();if(this.systemId&&c&&c.id){this.easyAccessCache[this.systemId]=c;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var a=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(a)===-1){return;}var S=s.getProperty("/search/searchTerm");var b=s.getProperty("/search/searchMode");if(b){sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId('appFinderSearch').getCustomData()[0].setValue('');this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(r){r.text=s.systemName||s.systemId;this.easyAccessModel.setData(r);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){jQuery.sap.require('sap.m.MessageBox');var E=this.getErrorMessage(e);sap.m.MessageBox.error(E);this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName=="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName=="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}}else{return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);}},getMenuItems:function(m,s,e,a,n){var d=new jQuery.Deferred();if(m!="SAP_MENU"&&m!="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof a!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e==""){a=0;}var N;var M=this.getView().getModel();var c=M.getProperty("/easyAccessNumbersOfLevels");if(c){N=c;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=a+N+1;var S=this._getODataRequestUrl(m,s,e,l);var r={requestUri:S};var C=this._callODataService(r,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});C.done(function(b){d.resolve(b);});C.fail(function(b){d.reject(b);});return d.promise();},_callODataService:function(r,s,S){jQuery.sap.require("sap.ui.thirdparty.datajs");var t=this;var d=new jQuery.Deferred();if(!S){S={};}OData.read(r,function(R,o){if(R&&R.results&&o&&o.statusCode===200){var a=s.bind(t,R,S)();d.resolve(a);}},function(m){d.reject(m);});return d.promise();},handleSuccessOnReadMenuItems:function(r,p){var R=this._oDataResultFormatter(r.results,p.systemId,p.entityId,p.iLevelFilter);return R;},handleSuccessOnReadFilterResults:function(r){var u;r.results.forEach(function(R,i){u=this._appendSystemToUrl(R,this.systemId);R.url=u}.bind(this));return{results:r.results,count:r.__count}},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf('?')>0?'&':'?')+'sap-system='+s;}},_oDataResultFormatter:function(r,s,e,l){var f={};var R={};if(e==""){R={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=R;}else{R={id:e,folders:[],apps:[]};f[e]=R;}var o;for(var i=0;i<r.length;i++){o=r[i];var p;if(o.level=="01"){p=f["root"];}else{p=f[o.parentId];}var m={id:o.Id,text:o.text,subtitle:o.subtitle,icon:o.icon,level:parseInt(o.level,10)};if(o.type=='FL'){m.folders=[];m.apps=[];if(o.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[o.Id]=m;}else{m.url=this._appendSystemToUrl(o,s);if(p&&p.apps){p.apps.push(m);}}}return R;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var L;if(l<10){L="0"+l;}else{L=l.toString();}var a="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}a="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+a+"?$filter=level lt '"+L+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;var t=this._removeWildCards(t);var f=!f?0:f;S=S+";o="+s+"/MenuItems"+"?$filter=type ne 'FL' and substringof('"+t+"', text) or substringof('"+t+"', subtitle) or substringof('"+t+"', url)&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m=="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m=="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});}());},"sap/ushell/components/flp/launchpad/appfinder/EasyAccess.view.js":function(){(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(c){this.oResourceBundle=sap.ushell.resources.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"navigation",writeToDom:true}));this.hierarchyFolders.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessListNavigationContainer"),writeToDom:true}));this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(c)}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyApps.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"region",writeToDom:true}));this.hierarchyApps.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:this.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));this.splitApp=new sap.m.SplitApp({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.EasyAccess";}});}());},"sap/ushell/components/flp/launchpad/appfinder/GroupListPopover.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",{onInit:function(){var v=this.getView();var g=v.getViewData().groupData;this.oPopoverModel=new sap.ui.model.json.JSONModel({userGroupList:g});v.oPopover.setModel(this.oPopoverModel);},okButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView();var u=this.oPopoverModel.getProperty("/userGroupList");var r={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};u.forEach(function(g){if(g.selected===g.initiallySelected){return;}if(g.selected){r.addToGroups.push(g.oGroup);}else{r.removeFromGroups.push(g.oGroup);}});if(v.newGroupInput&&v.newGroupInput.getValue().length){r.newGroups.push(v.newGroupInput.getValue());}v.oPopover.close();v.deferred.resolve(r);},_cancelButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView();v.oPopover.close();v.deferred.reject();},_navigateToCreateNewGroupPane:function(){var v=this.getView();if(!v.headBarForNewGroup){v.headBarForNewGroup=v._createHeadBarForNewGroup();}if(!v.newGroupInput){v.newGroupInput=v._createNewGroupInput();}v.oPopover.removeAllContent();v.oPopover.addContent(v.newGroupInput);v.oPopover.setCustomHeader(v.headBarForNewGroup);v.oPopover.setContentHeight("");if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);}setTimeout(function(){v.newGroupInput.focus();},0);},_afterCloseHandler:function(){var v=this.getView();v.oGroupsContainer.destroy();if(v.headBarForNewGroup){v.headBarForNewGroup.destroy();}if(v.newGroupInput){v.newGroupInput.destroy();}v.oPopover.destroy();v.destroy();},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!sap.ui.Device.system.phone){v.oPopover.setContentHeight(v.iPopoverDataSectionHeight+"px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v.oGroupsContainer);v.oPopover.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v.newGroupInput.setValue('');},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});}());},"sap/ushell/components/flp/launchpad/appfinder/GroupListPopover.view.js":function(){(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",{createContent:function(c){this.iPopoverDataSectionHeight=192;this.oGroupsContainer=this._createPopoverContainer(this.iPopoverDataSectionHeight);this.oPopover=new sap.m.ResponsivePopover({id:"groupsPopover",placement:"Auto",title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',beginButton:this._createOkButton(),endButton:this._createCancelButton(),content:this.oGroupsContainer,afterClose:this.getController()._afterCloseHandler.bind(this.getController())});this.oPopover.setInitialFocus('newGroupItem');},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=jQuery.Deferred();return this.deferred.promise();},_createPopoverContainer:function(p){var n=this._createNewGroupUiElements();var g=this._createPopoverGroupList();var a=new sap.m.ScrollContainer({id:"popoverContainer",horizontal:false,vertical:true,content:[n,g]});if(!sap.ui.Device.system.phone){a.setHeight((p-2)+"px");}else{a.setHeight("100%");}return a;},_createNewGroupUiElements:function(){var n=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:this.getController()._navigateToCreateNewGroupPane.bind(this.getController())});var N=new sap.m.List({});if(this.getViewData().enableHelp){n.addStyleClass('help-id-newGroupItem');}N.addItem(n);N.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#popoverContainer .sapMListModeMultiSelect li, #popoverContainer .sapMListModeSingleSelectMaster li").first();j.focus();}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#okButton");j.focus();}catch(e){}}});return N;},_createNewGroupInput:function(){var n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("new_group_name")});n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"));n.enabled=true;n.addStyleClass("sapUshellCatalogNewGroupInput");return n;},_createHeadBarForNewGroup:function(){var b=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:this.getController()._backButtonHandler.bind(this.getController()),tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});b.addStyleClass("sapUshellCatalogNewGroupBackButton");var h=new sap.m.Bar({contentLeft:[b],contentMiddle:[new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")})]});return h;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover";},_createPopoverGroupList:function(){var l=new sap.m.DisplayListItem({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:sap.m.ListType.Active});var u=[];u.push(new sap.ui.model.Filter("oGroup/isGroupLocked",sap.ui.model.FilterOperator.EQ,false));if(this.getViewData().enableHideGroups){u.push(new sap.ui.model.Filter("oGroup/isGroupVisible",sap.ui.model.FilterOperator.EQ,true));}var s=this.getViewData().singleGroupSelection;var L=new sap.m.List({growing:true,growingThreshold:200,mode:s?sap.m.ListMode.SingleSelectMaster:sap.m.ListMode.MultiSelect,includeItemInSelection:true,items:{path:"/userGroupList",template:l,filters:u}});if(s){L.attachSelect(this.getController().okButtonHandler.bind(this.getController()));}L.addEventDelegate({onsapup:function(E){try{E.preventDefault();var j,c=jQuery(":focus");if(c.index()==0){j=jQuery("#newGroupItem");j.focus();E._bIsStopHandlers=true;}}catch(e){jQuery.sap.log.error("Groups popup Accessibility `up` key failed");}}});return L;},_createOkButton:function(){var o=new sap.m.Button({id:"okButton",press:this.getController().okButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var j=jQuery("#newGroupItem");if(!j.length){j=jQuery("#newGroupNameInput input");}j.focus();}catch(e){jQuery.sap.log.error("Groups popup Accessibility `shift-tab` key failed");}}});return o;},_createCancelButton:function(){return new sap.m.Button({id:"cancelButton",press:this.getController()._cancelButtonHandler.bind(this.getController()),text:sap.ushell.resources.i18n.getText("cancelBtn")});}});}());},"sap/ushell/components/flp/launchpad/appfinder/HierarchyApps.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p);var b=sap.ushell.Container.getService("Bookmark");var c=a.map(function(d){return b.countBookmarks(d.url).then(function(f){d.bookmarkCount=f;return d;});});jQuery.when.apply(jQuery,c).then(function(){var a=Array.prototype.slice.call(arguments);e.setProperty(p,a);});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var c=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",c);var n=this.getView().getModel("easyAccess").getProperty(p+'/apps');this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=sap.ushell.resources.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=sap.ushell.resources.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,c=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A=='addBookmark_ToExistingGroup'){n++;if(n==1){f=g.title;}}else if(A=='addBookmark_ToNewGroup'){n++;if(n==1){f=g;}}else{c=true;}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));jQuery.when.apply(jQuery,b).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,r);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,r){var e=r.filter(function(b,i,r){return!b.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var d=sap.ushell.components.flp.launchpad.getDashboardManager();d.resetGroupsOnFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var d=sap.ushell.components.flp.launchpad.getDashboardManager();var b=jQuery.Deferred(),r={};var c=d.createGroup(n);c.done(function(e){var f=this._addBookmark(e.getObject(),a,true);f.done(function(g){b.resolve(g);}).fail(function(){r={group:n,status:0,action:'addBookmark_ToNewGroup'};b.resolve(r);});}.bind(this)).fail(function(){r={group:n,status:0,action:'addBookmark_NewGroupCreation'};b.resolve(r);});return b.promise();},_addBookmark:function(g,a,i){var b=sap.ushell.Container.getService("Bookmark");var d=jQuery.Deferred(),r={};var c=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var e=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";c.done(function(){r={group:g,status:1,action:e};d.resolve(r);}).fail(function(){r={group:g,status:0,action:e};d.resolve(r);});return d.promise();},showSaveAppPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(!!m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var c={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,c);return;}var b=m.getProperty("/groups").map(function(f){return{selected:false,initiallySelected:false,oGroup:f};});var p=new sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.flp.launchpad.appfinder.GroupListPopover",viewData:{groupData:b,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var d=p.open(e.oSource);d.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var r=sap.ushell.resources.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var R="";if(t){R=r.getText('search_easy_access_results',[t,S]);}return R;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var c=a.length;return sap.ushell.resources.i18n.getText('EasyAccessSearchResults_ShowMoreResults',[c,t]);}});}());},"sap/ushell/components/flp/launchpad/appfinder/HierarchyApps.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.appfinder.AppBox");jQuery.sap.require("sap.ushell.ui.appfinder.PinButton");sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyApps",{createContent:function(c){this.oController=c;function g(G,b,s,a,d){var r=sap.ushell.resources.i18n,t;if(s){var i=jQuery.inArray(a,G);var T=i!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=r.getText(T,d);}else{t=b?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new sap.ushell.ui.appfinder.PinButton({icon:'sap-icon://pushpin-off',selected:{path:"easyAccess>bookmarkCount",formatter:function(b){return(!!b);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,b,s,a,d){return g(G,b,s,a,d);}},press:c.showSaveAppPopover.bind(c)});p.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new sap.ushell.ui.appfinder.AppBox({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[c.onAppBoxPressed,c]});this.oItemTemplate.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new sap.m.FlexBox(this.getId()+'_hierarchyAppsLayout',{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:sap.m.FlexWrap.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(a){if(a.getKey()==="tabindex"){a.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new sap.m.MessagePage({visible:false,showHeader:false,text:sap.ushell.resources.i18n.getText('EasyAccessMenu_NoAppsToDisplayMessagePage_Text'),description:''});var C=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new sap.ui.model.json.JSONModel({crumbs:[]});this.linkTemplate=new sap.m.Link({text:"{crumbs>text}",press:function(e){var a=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(a.path,false);}.bind(this)});this.breadcrumbs=new sap.m.Breadcrumbs({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");C.push(this.breadcrumbs);}else{this.resultText=new sap.m.Text({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:c.resultTextFormatter.bind(c)}}).addStyleClass('sapUshellEasyAccessSearchResultText');this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-level",value:"3",writeToDom:true}));C.push(this.resultText);this.showMoreResultsLink=new sap.m.Button({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsTextFormatter.bind(c)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:c.showMoreResultsVisibilityFormatter.bind(c)},type:sap.m.ButtonType.Transparent});}C.push(this.oMessagePage);C.push(this.layout);if(this.showMoreResultsLink){C.push(this.showMoreResultsLink)}return C;},updateResultSetMessage:function(i,I){var e;if(I){e='noFilteredItems';}else{e='EasyAccessMenu_NoAppsToDisplayMessagePage_Text';}if(i){if(I){this.resultText.updateProperty('text');this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=sap.ushell.resources.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(b){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(b);}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyApps";}});}());},"sap/ushell/components/flp/launchpad/appfinder/HierarchyFolders.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=jQuery('#'+this.getView().getId());j.on("click",function(e){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"flp.launchpad.appfinder.HierarchyFolders",item:"lastSelectedSystem"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},getSelectedSystem:function(){var d=new jQuery.Deferred();var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var S=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){S=true;d.resolve(p);}}if(!S){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new jQuery.Deferred();this.getPersonalizer().getPersData().then(function(p){if(p){d.resolve(p);}else{d.resolve();}},function(e){jQuery.sap.log.error("Failed to get selected system from the personalization",e,"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders");d.reject();});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().setPersData(s).fail(function(e){jQuery.sap.log.error("Failed to save selected system in the personalization",e,"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders");});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new sap.m.SelectDialog({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new sap.m.StandardListItem({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem;var s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value");var f=new sap.ui.model.Filter("systemName",sap.ui.model.FilterOperator.Contains,v);var F=new sap.ui.model.Filter("systemId",sap.ui.model.FilterOperator.Contains,v);var s=new sap.ui.model.Filter({filters:[F,f],and:false});var b=e.getSource().getBinding("items");b.filter(s);},titleFormatter:function(s,a){return s||a;},descriptionFormatter:function(s,a){if(s){return a;}return null;},selectedFormatter:function(s,a){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s);}else{return(u.systemId===a);}},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}else{return s.systemId;}}else{return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");}},exitSearchMode:function(){var s=this.getView().getModel('subHeaderModel');s.setProperty('/search/searchMode',false);s.refresh(true);}});}());},"sap/ushell/components/flp/launchpad/appfinder/HierarchyFolders.view.js":function(){(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",{createContent:function(c){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.treePath="";this.systemSelectorText=new sap.m.Text({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:c.systemSelectorTextFormatter.bind(c)}});this.oItemTemplate=new sap.m.StandardListItem({title:"{easyAccess>text}",type:"Navigation",press:function(){var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(L){L.onsapspace=L.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new sap.m.Page({showNavButton:false,enableScrolling:true,headerContent:new sap.m.Bar({contentLeft:[new sap.m.Label({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:c.systemSelectorTextFormatter.bind(c)}})],contentRight:[new sap.m.Button({text:this.translationBundle.getText("action_change"),type:sap.m.ButtonType.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[c.onSystemSelectionPress,c]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var b=this.pageMenu.$().find(".sapMBarLeft button");if(b.length){b.focus();}else{setTimeout(function(){this.pageMenu.$().find("header + header").focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.controller.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.components.flp.launchpad.dashboard.DashboardUIActions");jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");sap.ui.controller("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("launchpad","appClosed",this._resizeHandler,this);e.subscribe("launchpad","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe('launchpad','actionModeInactive',this._handleGroupVisibilityChanges,this);window.document.addEventListener("visibilitychange",sap.ushell.utils.handleTilesVisibility,false);this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));this.isNotificationPreviewLoaded=false;this._setCenterViewPortShift();},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("launchpad","appClosed",this._resizeHandler,this);e.unsubscribe("launchpad","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);window.document.removeEventListener("visibilitychange",sap.ushell.utils.handleTilesVisibility,false);},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus(),v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),m,t,g,i,a;jQuery(s[0]).off("scrollstop",this.handleDashboardScroll);jQuery(s[0]).on("scrollstop",this.handleDashboardScroll);e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);sap.ui.Device.orientation.attachHandler(function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible');if(j.length){m=this.getView().getModel();t=m.getProperty('/topGroupInViewPortIndex');if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty('/editTitle');this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);jQuery(window).bind("resize",function(){clearTimeout(a);a=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));if(this.getView().getModel().getProperty("/personalization")&&!sap.ushell.components.flp.ActionMode){jQuery.sap.require("sap.ushell.components.flp.ActionMode");sap.ushell.components.flp.ActionMode.init(this.getView().getModel());}this._updateTopGroupInModel();},_setCenterViewPortShift:function(){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(true);}},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(T)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(t&&document.activeElement.tagName!=="INPUT"){sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(t.$());}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick");},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();m.setProperty('/topGroupInViewPortIndex',t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName('section'),j=$(s).find('.sapUshellTileContainer'),o=j.not('.sapUshellHidden').first().offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,a=0;if(!j||!o){return a;}j.each(function(){if(!jQuery(this).hasClass("sapUshellHidden")){var c=jQuery(this).parent().offset().top;t.push([c,c+jQuery(this).parent().height()]);}});var b=n+f;jQuery.each(t,function(i,c){var e=c[0],g=c[1];if(e-24<=b&&b<=g){a=i;return false;}});return a;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=1000;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){sap.ushell.utils.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);v.oAnchorNavigationBar.closeOverflowPopup();if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){jQuery.sap.require('sap.m.MessageBox');var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,a=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A=sap.m.MessageBox.Action,c=(i?A.DELETE:r.getText('ResetGroupBtn')),v=this.getView();m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:a});}},r.getText(i?'delete_group':'reset_group'),[c,A.CANCEL]);v.oAnchorNavigationBar.updateVisibility();},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){var d=new sap.ushell.components.flp.launchpad.dashboard.DashboardUIActions();d.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.style.display=d;});}else{jQuery.sap.log.info('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){this._addBottomSpace();sap.ushell.utils.handleTilesVisibility();var i=jQuery.find("#dashboardGroups:visible").length;if(sap.ushell.Layout&&i){sap.ushell.Layout.reRenderGroupsLayout(null);this._initializeUIActions();}},_appOpenedHandler:function(c,e,d){var v,p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){sap.ushell.utils.setTilesNoVisibility();v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(false);}}if(sap.ushell.components.flp.ActionMode&&sap.ushell.components.flp.ActionMode.oModel&&sap.ushell.components.flp.ActionMode.oModel.getProperty("/tileActionModeActive")){sap.ushell.components.flp.ActionMode.toggleActionMode(m,"Menu Item");}},_addBottomSpace:function(){sap.ushell.utils.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,v=this.oView.oDashboardGroupsBox.getGroups(),f=d.fromTop>0?d.fromTop:0;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(v){jQuery.each(v,function(n,G){if(G.getGroupId()===g){var y=document.getElementById(G.sId).offsetTop;jQuery('.sapUshellDashboardView section').stop().animate({scrollTop:y+f},0);sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(jQuery("#"+G.getId()+" li").first());return false;}});sap.ushell.utils.addBottomSpace();}},_scrollToGroup:function(c,e,d){var g,D,t=this;if(d.iDuration==undefined){D=500;}else{D=d.iDuration;}if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(this.oView.oDashboardGroupsBox.getGroups()){jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;setTimeout(function(){y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;var a=jQuery(document.getElementById(G.sId)).find(".sapUshellTileContainerHeader").height();var b=jQuery(document.getElementById(G.sId)).find(".sapUshellTileContainerBeforeContent").height();var i=G.getModel().getProperty('/tileActionModeActive');y=a>0&&!i?y+48:y+b+8;jQuery('.sapUshellDashboardView section').stop().animate({scrollTop:y},D,function(){if(d.groupChanged){if(!d.restoreLastFocusedTile){sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(jQuery("#"+G.getId()+" li").first());}}if(d.restoreLastFocusedTile){var T="#"+G.getId();var l=false;if(d.restoreLastFocusedTileContainerById){T="#"+d.restoreLastFocusedTileContainerById;l=true;}sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile(jQuery(T),l);}});if(d.isInEditTitle){G.setEditMode(true);}},300);if(d.groupId||d.groupChanged){t._addBottomSpace();}sap.ushell.utils.handleTilesVisibility();return false;}});}},_handleDrop:function(e,u){var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback(),E=sap.ui.getCore().getEventBus(),n,a;if(!t.tileMovedFlag){return;}n=true;a=true;if((t.srcGroup!==t.dstGroup)){n=a=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){a=false;}t.srcGroup.removeAggregation('tiles',t.tile,n);t.dstGroup.insertAggregation('tiles',t.tile,t.dstTileIndex,a);E.publish("launchpad","moveTile",{sTileId:t.tile.getUuid(),toGroupId:t.dstGroup.getGroupId(),toIndex:t.dstTileIndex});sap.ushell.components.flp.ComponentKeysHandler.setTileFocus(jQuery(u));E.publish("launchpad","sortableStop");},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel();if(sap.ui.Device.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}var g=m.getProperty("/groups");for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){var s=e.getParameter("group").getIndex(),h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}var f=s-h;v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.adjustItemSelection(f);v.oAnchorNavigationBar.setSelectedItemIndex(f);sap.ushell.utils.handleTilesVisibility();}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter('group'),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),a=p.split("/");i=window.parseInt(a[a.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i,isRendered:true});},_notificationsUpdateCallback:function(){var t=this,r=5,T=0,R=this.getView().getModel().getProperty("/previewNotificationItems"),n=[],N=[],a,b,c,d,e,i,o,f=false,m=r-R.length-1;sap.ushell.Container.getService("Notifications").getNotifications().done(function(g){if(!g){return;}var h=sap.ui.getCore().byId("notifications-preview-container"),v;if(!this.isNotificationPreviewLoaded){h.setEnableBounceAnimations(true);}if(R&&R.length){for(e=0;e<R.length;e++){var O=R[e].originalItemId,j=false;for(i=0;i<g.length;i++){if(g[i].Id===O){j=true;break;}if(R[e].originalTimestamp>g[i].CreatedAt){break;}}if(!j){R.splice(e,1);f=true;e--;}}}if(R&&R.length>0){a=R[0].originalTimestamp;b=sap.ushell.Container.getService("Notifications")._formatAsDate(a);}for(e=0;(e<g.length)&&(T<r);e++){c=g[e].CreatedAt;d=sap.ushell.Container.getService("Notifications")._formatAsDate(c);if((b?d>b:true)){n[T]=g[e];T++;}}var k=n.length;if(R&&R.length>0&&R.length<r&&g.length>R.length){a=R[R.length-1].originalTimestamp;b=sap.ushell.Container.getService("Notifications")._formatAsDate(a);T=0;for(e=0;(e<g.length)&&(T<=m);e++){c=g[e].CreatedAt;d=sap.ushell.Container.getService("Notifications")._formatAsDate(c);if(d<b){n[k+T]=g[e];T++;}}}if(n.length===0&&!f){this._disableNotificationPreviewBouncingAnimation(h);return;}for(i=0;i<n.length;i++){o=new sap.m.NotificationListItem({hideShowMoreButton:true,title:n[i].SensitiveText?n[i].SensitiveText:n[i].Text,datetime:sap.ushell.utils.formatDate(n[i].CreatedAt),priority:sap.ui.core.Priority[n[i].Priority.charAt(0)+n[i].Priority.substr(1).toLowerCase()],press:function(E){var s=this.getBindingContext().getPath(),p=s.split("/"),P="/"+p[1]+"/"+p[2],l=this.getModel().getProperty(P),S=l.NavigationTargetObject,A=l.NavigationTargetAction,q=l.NavigationTargetParams,u=l.originalItemId,w=sap.ushell.Container.getService("Notifications");sap.ushell.utils.toExternalWithParameters(S,A,q);var x=w.markRead(u);x.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedMarkRead'));});},close:function(E){var s=this.getBindingContext().getPath(),p=s.split("/"),P="/"+p[1]+"/"+p[2],l=this.getModel().getProperty(P),q=l.originalItemId,R=t.getView().getModel().getProperty("/previewNotificationItems"),u=sap.ushell.Container.getService("Notifications"),w=u.dismissNotification(q);w.done(function(){var i;for(i=0;i<R.length;i++){if(R[i].originalItemId===q){break;}}R.splice(i,1);t.getView().getModel().setProperty("/previewNotificationItems",R);});w.fail(function(){sap.ushell.Container.getService('Message').error(sap.ushell.resources.i18n.getText('notificationsFailedDismiss'));t.getView().getModel().setProperty("/previewNotificationItems",R);});}}).addStyleClass("sapUshellNotificationsListItem");N.push({previewItemId:o.getId(),originalItemId:n[i].Id,originalTimestamp:n[i].CreatedAt,NavigationTargetObject:n[i].NavigationTargetObject,NavigationTargetAction:n[i].NavigationTargetAction,NavigationTargetParams:n[i].NavigationTargetParams});v=sap.ui.getCore().byId('viewPortContainer');if(v.getCurrentState()==="RightCenter"){o.addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}}if(R.length===0){t.getView().getModel().setProperty("/previewNotificationItems",N);this._disableNotificationPreviewBouncingAnimation(h);return;}for(e=N.length-1;e>-1;e--){if(R.length>=r){setTimeout(function(){R.pop();t.getView().getModel().setProperty("/previewNotificationItems",R);},1000);}if(N[e].originalTimestamp>R[0].originalTimestamp){R.unshift(N[e]);}else{R.push(N[e]);}}t.getView().getModel().setProperty("/previewNotificationItems",R);this._disableNotificationPreviewBouncingAnimation(h);}.bind(this)).fail(function(){});},_disableNotificationPreviewBouncingAnimation:function(n){if(!this.isNotificationPreviewLoaded){this.isNotificationPreviewLoaded=true;n.setEnableBounceAnimations(false);}},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(b.publish,b,c,e,d),1);},_changeGroupVisibility:function(g){var b=g.getPath(),m=g.getModel(),G=m.getProperty(b+'/isGroupVisible'),v=this.getView();m.setProperty(b+'/isGroupVisible',!G);v.oAnchorNavigationBar.updateVisibility();},_handleGroupVisibilityChanges:function(c,e,o){var l=sap.ushell.Container.getService('LaunchPage'),m=this.getView().getModel(),C=sap.ushell.utils.getCurrentHiddenGroupIds(m),s=C.length===o.length,i=s,p;C.some(function(h,I){if(!i){return true;}i=jQuery.inArray(h,o)!==-1;return!i;});if(!i){p=l.hideGroups(C);p.done(function(){m.updateBindings('groups');}.bind(this));p.fail(function(){var a=sap.ushell.Container.getService('Message');a.error(sap.ushell.resources.i18n.getText('hideGroups_error'));});}},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();},_initializeShellUIService:function(){jQuery.sap.require("sap.ushell.ui5service.ShellUIService");this.oShellUIService=new sap.ushell.ui5service.ShellUIService({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel();var g=m.getProperty("/groups");for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(var i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(var i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.adjustItemSelection(f);v.oAnchorNavigationBar.setSelectedItemIndex(f);m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardContent.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.components.flp.launchpad.dashboard.DashboardGroupsBox");jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.override");jQuery.sap.require("sap.ushell.resources");jQuery.sap.require("sap.ushell.Layout");jQuery.sap.require("sap.ushell.ui.launchpad.AnchorItem");jQuery.sap.require("sap.ushell.ui.shell.RightFloatingContainer");sap.ui.jsview("sap.ushell.components.flp.launchpad.dashboard.DashboardContent",{createContent:function(c){var d,V=sap.ui.getCore().byId("viewPortContainer"),C,t=this;this.isTouch=sap.ui.Device.system.combi?false:(sap.ui.Device.system.phone||sap.ui.Device.system.tablet);this.isCombi=sap.ui.Device.system.combi;this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=!!(this.oModel.getProperty("/personalization")&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge)&&sap.ui.Device.browser.version>=11&&(sap.ui.Device.system.combi||sap.ui.Device.system.tablet));sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","enablePreviewNotificationChanged",this._enablePreviewNotificationChanged,this);sap.ui.getCore().byId('navContainerFlp').attachAfterNavigate(this.onAfterNavigate,this);this.addEventDelegate({onBeforeFirstShow:function(){var D=sap.ushell.components.flp.launchpad.getDashboardManager();D.loadPersonalizedGroups();this.onAfterNavigate();}.bind(this),onAfterShow:function(){this.getController()._addBottomSpace();this.getController()._updateShellHeader();}.bind(this),onAfterHide:function(e){}});this.oAnchorNavigationBar=this._getAnchorNavigationBar(c);d=new sap.ushell.components.flp.launchpad.dashboard.DashboardGroupsBox();this.oDashboardGroupsBox=d.createGroupsBox(c,this.oModel);C=this._previewNotificationEnabled();if(V){V.shiftCenterTransitionEnabled(C);}var u=function(n){var b=this.mBindingInfos[n],a=this.getMetadata().getJSONKeys()[n],o;jQuery.each(this[a._sGetter](),jQuery.proxy(function(i,v){this[a._sRemoveMutator](v);},this));jQuery.each(b.binding.getContexts(),jQuery.proxy(function(i,v){o=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[a._sMutator](o);},this));};this.oPreviewNotificationsContainerPlaceholder=new sap.ushell.ui.shell.RightFloatingContainer({id:'notifications-preview-container-placeholder',visible:{path:'/enableNotificationsPreview',formatter:function(v){return t._handleNotificationsPreviewVisibility.apply(t,[v]);}}}).addStyleClass('sapUshellPreviewNotificationsConainer');this.oPreviewNotificationsContainer=new sap.ushell.ui.shell.RightFloatingContainer({id:'notifications-preview-container',top:4,right:'1rem',floatingContainerItems:{path:"/previewNotificationItems",factory:function(f,o){return sap.ui.getCore().byId(o.getObject().previewItemId);}},visible:{path:'/enableNotificationsPreview',formatter:this._handleNotificationsPreviewVisibility.bind(this)}}).addStyleClass('sapContrastPlus').addStyleClass('sapContrast');this.oPreviewNotificationsContainer.updateAggregation=u;this.oFilterSelectedGroup=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);this.oDoneBtn=new sap.m.Button('sapUshellDashboardFooterDoneBtn',{type:sap.m.ButtonType.Emphasized,text:sap.ushell.resources.i18n.getText("doneBtnText"),tooltip:sap.ushell.resources.i18n.getText("doneBtnTooltip"),press:function(){var a=this.oDashboardGroupsBox.getGroups();sap.ushell.components.flp.ActionMode.toggleActionMode(this.oModel,"Menu Item",a);this.oAnchorNavigationBar.updateVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.getController()._deactivateActionModeInTabsState();}}.bind(this)});this.oDoneBtn.addEventDelegate({onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabnext:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oFooter=new sap.m.OverflowToolbar('sapUshellDashboardFooter',{visible:{parts:['/tileActionModeActive','/viewPortState'],formatter:function(a,s){return a&&s==='Center';}},layoutData:new sap.m.OverflowToolbarLayoutData({moveToOverflow:false}),content:[new sap.m.ToolbarSpacer(),this.oDoneBtn]});this.oPage=new sap.m.Page('sapUshellDashboardPage',{customHeader:this.oAnchorNavigationBar,content:[this.oDashboardGroupsBox],floatingFooter:true,footer:this.oFooter});return[this.oPage,this.oPreviewNotificationsContainerPlaceholder,this.oPreviewNotificationsContainer];},_handleNotificationsPreviewVisibility:function(e){var r=sap.ushell.Container.getRenderer('fiori2'),c=r.getCurrentViewportState(),i=c==='Center',n=sap.ushell.Container.getService('Notifications');this.oDashboardGroupsBox.toggleStyleClass('sapUshellDashboardGroupsContainerSqueezed',e);this.oAnchorNavigationBar.toggleStyleClass('sapUshellAnchorNavigationBarSqueezed',e);e=e&&i;if(e){if(!this.bNotificationsRegistered){n.registerNotificationsUpdateCallback(this.oController._notificationsUpdateCallback.bind(this.oController));this.bNotificationsRegistered=true;}if(n.isFirstDataLoaded()){setTimeout(function(){if(this.oController&&this.oController._notificationsUpdateCallback){this.oController._notificationsUpdateCallback();}}.bind(this),300);}if(!this.bSubscribedToViewportStateSwitch){this.bHeadsupNotificationsInitialyVisible=r.getRightFloatingContainerVisibility();sap.ui.getCore().getEventBus().subscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=true;}}return e;},_fOnAfterAnchorBarRenderingHandler:function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){if(x){this.addStyleClass("help-id-homeAnchorNavigationBarItem");}}else{if(x){this.addStyleClass("help-id-anchorNavigationBarItem");}}},_getAnchorItemTemplate:function(){var a=new sap.ushell.ui.launchpad.AnchorItem({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,i,v){if(!v[t?1:0]){return false;}return i||t;}},afterRendering:this._fOnAfterAnchorBarRenderingHandler});return a;},_getAnchorNavigationBar:function(c){var a=this._getAnchorItemTemplate(),A=new sap.ushell.ui.launchpad.AnchorNavigationBar("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e);},c],groups:{path:"/groups",template:a}});A=this._extendAnchorNavigationBar(A);A.addStyleClass("sapContrastPlus");return A;},_extendAnchorNavigationBar:function(a){var e=jQuery.extend(a,{onsapskipforward:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(E,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsaptabnext:function(E){E.preventDefault();var j=jQuery(":focus");if(!j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")||(j.parent().parent().siblings().hasClass("sapUshellAnchorItemOverFlow")&&j.parent().parent().siblings().hasClass("sapUshellShellHidden"))){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(E);this.bGroupWasPressed=false;}else{var b=jQuery(".sapUshellAnchorItemOverFlow button");b.focus();}},onsapskipback:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);},onsaptabprevious:function(E){E.preventDefault();var j=jQuery(":focus");if(!j.parent().hasClass("sapUshellAnchorItemOverFlow")){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}else{var b=jQuery(".sapUshellAnchorItem:visible:first");if(!b.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}else{sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}}},onsapenter:function(E){E.srcControl.getDomRef().click();},onsapspace:function(E){E.srcControl.getDomRef().click();}});return e;},_addActionModeButtonsToDashboard:function(){if(sap.ushell.components.flp.ActionMode){sap.ushell.components.flp.ActionMode.init(this.getModel());}},_createActionModeMenuButton:function(){this.oTileActionsButton=sap.ushell.Container.getRenderer("fiori2").addActionButton("sap.ushell.ui.launchpad.ActionItem",{id:"ActionModeBtn",text:sap.ushell.resources.i18n.getText("activateEditMode"),icon:'sap-icon://edit',press:function(){var d=this.oDashboardGroupsBox.getGroups();sap.ushell.components.flp.ActionMode.toggleActionMode(this.oModel,"Menu Item",d);this.oAnchorNavigationBar.updateVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){this.oDashboardGroupsBox.getBinding("groups").filter([]);var g=this.oModel.getProperty("/groups"),s;for(var i=0;i<g.length;i++){if(g[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return g[s].groupId}},groupChanged:false,focus:true});}else{this.getController()._deactivateActionModeInTabsState();}}}.bind(this)},false,true);if(this.oModel.getProperty("/enableHelp")){this.oTileActionsButton.addStyleClass('help-id-ActionModeBtn');}sap.ushell.Container.getRenderer("fiori2").showActionButton(this.oTileActionsButton.getId(),true);},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass('sapUshellAcionItemActive');}},_enablePreviewNotificationChanged:function(c,e,d){this.oModel.setProperty("/userEnableNotificationsPreview",d.bPreviewEnabled);},_previewNotificationEnabled:function(){var c=this.oModel.getProperty("/configEnableNotificationsPreview"),u=this.oModel.getProperty("/userEnableNotificationsPreview");return(c&&u);},_createActionButtons:function(){var e=this.oModel.getProperty("/personalization");if(e){if(this.oModel.getProperty("/actionModeMenuButtonEnabled")){this._createActionModeMenuButton();}}},onAfterNavigate:function(e){var n=sap.ui.getCore().byId('navContainerFlp'),c=n?n.getCurrentPage().getViewName():undefined,i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent",r=sap.ushell.Container.getRenderer("fiori2");if(i){r.createExtendedShellState("dashboardExtendedShellState",function(){this._createActionButtons();r.setHeaderHiding(false);}.bind(this));this.getController()._setCenterViewPortShift();this._addActionModeButtonsToDashboard();setTimeout(function(){if(sap.ushell.Container){r.applyExtendedShellState("dashboardExtendedShellState");}},0);if(this.oAnchorNavigationBar&&this.oAnchorNavigationBar.anchorItems){this.oAnchorNavigationBar.setNavigationBarItemsVisibility();this.oAnchorNavigationBar.adjustItemSelection(this.oAnchorNavigationBar.getSelectedItemIndex());}if(document.activeElement&&document.activeElement.tagName==="BODY"){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}}},_handleViewportStateSwitch:function(c,e,d){var C=d.getParameter('to');if(C=='Center'){var n=sap.ui.getCore().byId("notifications-preview-container");if(n&&n.setFloatingContainerItemsVisiblity){n.setFloatingContainerItemsVisiblity(true);}}},_handleHeadsupNotificationsPresentation:function(c){var r=sap.ushell.Container.getRenderer('fiori2'),i=c==='Center',p=this.oPreviewNotificationsContainer.getDomRef(),h=p&&p.getBoundingClientRect(),P=h?h.bottom<0:false,s=i?P:this.bHeadsupNotificationsInitialyVisible;r.showRightFloatingContainer(s);},_onAfterDashboardShow:function(e){var j=jQuery('.sapUshellTileContainer:visible'),n=sap.ui.getCore().byId('navContainerFlp'),c=n?n.getCurrentPage().getViewName():undefined,i=c=="sap.ushell.components.flp.launchpad.dashboard.DashboardContent",t=this.oModel.getProperty('/tileActionModeActive'),v,p;if(i){if(!t){sap.ushell.utils.handleTilesVisibility();sap.ushell.utils.refreshTiles();var T=this.oModel.getProperty('/topGroupInViewPortIndex'),a=jQuery(j[T]),b=j.find("li[class*='sapUshellTile']li[tabindex=0]"),d=a.find('.sapUshellTile:first'),f;if(b.length){f=b;}else if(d.length){f=d;}else{f=jQuery("#configBtn");}p=this.oModel.getProperty('/enableNotificationsPreview');v=sap.ui.getCore().byId("viewPortContainer");if(v){v.shiftCenterTransition(p);}setTimeout(function(){f.focus();},0)}this.onAfterNavigate();}},getControllerName:function(){return"sap.ushell.components.flp.launchpad.dashboard.DashboardContent";},_isInDeashboard:function(){var n=sap.ui.getCore().byId("viewPortContainer"),c=sap.ui.getCore().byId("dashboardGroups");return((n.getCurrentCenterPage()==="application-Shell-home")&&(c.getModel().getProperty("/currentViewName")==="home"));},exit:function(){if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}sap.ui.core.mvc.View.prototype.exit.apply(this,arguments);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRendered",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","initialConfigurationSet",this._onAfterDashboardShow,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeInactive',this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad",'actionModeActive',this._handleEditModeChange,this);if(this.bSubscribedToViewportStateSwitch){sap.ui.getCore().getEventBus().unsubscribe("launchpad","afterSwitchState",this._handleViewportStateSwitch,this);this.bSubscribedToViewportStateSwitch=false;}}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardGroupsBox.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.dashboard.DashboardGroupsBox");sap.ui.base.Object.extend("sap.ushell.components.flp.launchpad.dashboard.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox&&sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox()){return sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox();}sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox=jQuery.sap.getter(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this.bTileContainersContentAdded=false;sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._addTileContainersContent,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._addTileContainersContent,this);sap.ushell.components.flp.launchpad.dashboard.getDashboardGroupsBox=undefined;},createGroupsBox:function(c,m){this.oController=c;var t=this,a,g,T=this._getTileContainerTemplate(c,m),E=function(){return t.oModel.getProperty('/enableLockedGroupsCompactLayout')&&!t.oModel.getProperty('/tileActionModeActive');},b=function(G){var d,p;if(G&&(d=G.getDomRef())){p=d.querySelector('.sapUshellPlusTile');if(p){return p;}}return null;},r=function(l){var p=b(l.currentGroup),d=b(l.endGroup),i=(l.tiles[l.tiles.length-2]===l.item)||(l.endGroup.getTiles().length===0);if(i){t._hidePlusTile(d);}else{t._showPlusTile(d);}if(l.currentGroup!==l.endGroup){t._showPlusTile(p);}};a=function(){sap.ushell.Layout.getLayoutEngine().setExcludedControl(sap.ushell.ui.launchpad.PlusTile);sap.ushell.Layout.getLayoutEngine().setReorderTilesCallback.call(sap.ushell.Layout.layoutEngine,r);};g=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),isLockedGroupsCompactLayoutEnabled:E,animationsEnabled:(t.oModel.getProperty('/animationMode')==='full')}).done(a);sap.ui.Device.media.attachHandler(function(){if(!this.bIsDestroyed){sap.ushell.Layout.reRenderGroupsLayout(null);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);var d=this.getDomRef();c.getView().sDashboardGroupsWrapperId=!jQuery.isEmptyObject(d)&&d.parentNode?d.parentNode.id:'';}sap.ushell.Layout.reRenderGroupsLayout(null);if(this.getGroups().length){if(c.bModelInitialized){c._initializeUIActions();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");c._addBottomSpace();if(this.getModel().getProperty("/tilesOpacity")){sap.ushell.utils.handleTilesOpacity(this.getModel());}}var f=new sap.ui.model.Filter("isGroupSelected",sap.ui.model.FilterOperator.EQ,true);var G=t.oModel.getProperty('/homePageGroupDisplay'),h=t.oModel.getProperty("/tileActionModeActive");if(G&&G==="tabs"&&!h){this.getBinding("groups").filter([f]);}else{this.getBinding("groups").filter([]);}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};jQuery.sap.require("sap.ushell.ui.launchpad.DashboardGroupsContainer");this.oGroupsContainer=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},displayMode:"{/homePageGroupDisplay}",afterRendering:g});this.oGroupsContainer.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(".sapUshellAnchorItem:visible:first");if(!j.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}else{sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}},onsapskipforward:function(e){e.preventDefault();var f=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(f.length){f.focus();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}},onsaptabnext:function(e){if(t.oModel.getProperty("/tileActionModeActive")){var j=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(!j||j.length===0){e.preventDefault();var f=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(f.length){f.focus();}}else{var d=jQuery(document.activeElement).closest(".sapUshellTileContainer");var i=jQuery(document.activeElement).hasClass("sapUshellContainerTitle");var h=d.find('.sapUshellHeaderActionButton');var k=h&&h.length>0;var l=false;if(k){l=document.activeElement.id===h.last()[0].id;}if((i&&!k)||(l)){e.preventDefault();var H=d.find(".sapUshellTile:visible, sapUshellLink:visible").length>0;if(H){sap.ushell.components.flp.ComponentKeysHandler.goToLastVisitedTile(d,true);}else{var f=jQuery("#sapUshellDashboardFooterDoneBtn:visible");if(f.length){f.focus();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}}}}}else{e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}},onsaptabprevious:function(e){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var j=jQuery(":focus");if(!t.oModel.getProperty("/tileActionModeActive")||j.hasClass("sapUshellTileContainerHeader")){e.preventDefault();var d=jQuery(".sapUshellAnchorItem:visible:first"),f=jQuery(".sapUshellAnchorItemOverFlow");if(!f&&!d.length){sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}if(f.hasClass("sapUshellShellHidden")){sap.ushell.components.flp.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}else{f.find("button").focus();}}else if(t.oModel.getProperty("/tileActionModeActive")){var h=jQuery(document.activeElement);if(h.hasClass('sapUshellTile')){e.preventDefault();var i=h.closest(".sapUshellTileContainer");var k=i.find('.sapUshellHeaderActionButton:visible').last();if(k.length>0){k.focus();}else{i.find('.sapUshellContainerTitle').focus();}}}}});this.oModel=m;return this.oGroupsContainer;},_getTileContainerTemplate:function(c,m){var t=this,T=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',ieHtml5DnD:c.getView().ieHtml5DnD,enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,editMode:"{editMode}",titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(a){return(a||!this.groupHasTiles())&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(a,i,v){if(!v[a?1:0]){return false;}return i||a;}},links:this._getLinkTemplate(),tiles:this._getTileTemplate(),add:function(e){t.oController.getView().parentComponent.getRouter().navTo('appFinder',{'menu':'catalog',filters:JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})});},afterRendering:jQuery.proxy(this._tileContainerAfterRenderingHandler,t)});return T;},_getLinkTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);if(window.location.search.indexOf("new_links_container=true")===-1){return{path:"links",templateShareable:true,template:new sap.ushell.ui.launchpad.LinkTileWrapper({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,c){return c.getObject();}},afterRendering:function(e){var j=jQuery(this.getDomRef().getElementsByTagName("a"));j.attr("tabindex",-1);}}),filters:[f]};}else{return{path:"links",factory:function(i,c){return c.getObject().content[0];},filters:[f]};}},_getTileTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);var t=new sap.ushell.ui.launchpad.Tile({"long":"{long}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,afterRendering:function(e){var c=e.getSource().getBindingContext(),T;if(c){T=c.getObject();sap.ui.getCore().getEventBus().publish("launchpad","tileRendered",{tileId:T.originalTileId,tileDomElementId:e.getSource().getId()});}},tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.components.flp.ActionMode._openActionsMenu(e);}},showActions:function(e){sap.ushell.components.flp.ActionMode._openActionsMenu(e);},deletePress:function(e){var T=e.getSource(),t=T.getBindingContext().getObject().object,d={originalTileId:sap.ushell.Container.getService("LaunchPage").getTileId(t)};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(e){jQuery.sap.measure.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");function a(){jQuery.sap.measure.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(a);}v.attachAfterNavigate(a);}});return{path:"tiles",templateShareable:true,template:t,filters:[f]};},_tileContainerAfterRenderingHandler:function(e){e.oSource.bindProperty("showBackground","/tileActionModeActive");e.oSource.bindProperty("showDragIndicator",{parts:['/tileActionModeActive','/enableDragIndicator'],formatter:function(I,d){return I&&d&&!this.getIsGroupLocked()&&!this.getDefaultGroup();}});e.oSource.bindProperty("showMobileActions",{parts:['/tileActionModeActive'],formatter:function(I){return I&&!this.getDefaultGroup();}});e.oSource.bindProperty("showIcon",{parts:['/isInDrag','/tileActionModeActive'],formatter:function(I,b){return(this.getIsGroupLocked()&&(I||b));}});e.oSource.bindProperty("deluminate",{parts:['/isInDrag'],formatter:function(I){return this.getIsGroupLocked()&&I;}});if(this.bTileContainersContentAdded&&!e.oSource.getBeforeContent().length){var g=e.oSource.getModel().getProperty("/groups"),i;for(i=0;i<g.length;i++){if(g[i].groupId===e.oSource.getGroupId()){break;}}this._addTileContainerContent(i);}sap.ushell.Layout.reRenderGroupsLayout(null);this._updateFirstGroupHeaderVisibility(e.oSource.getProperty('tileActionModeActive'),e.oSource.getModel().getProperty('/homePageGroupDisplay')!=="tabs");},_updateFirstGroupHeaderVisibility:function(I,e){var g=this.oGroupsContainer.getGroups(),f=undefined,v=0;for(var i=g.length-1;i>=0;--i){g[i].setShowGroupHeader(I||e);if(g[i].getProperty("visible")){v++;f=i;}}if(f!==undefined)g[f].setShowGroupHeader(I||(v==1&&e));},_addTileContainersContent:function(){if(!this.bTileContainersContentAdded){var g=this.oGroupsContainer.getGroups();g.forEach(function(a,b){this._addTileContainerContent(b);}.bind(this));this.bTileContainersContentAdded=true;}},_addTileContainerContent:function(g){var G=this.oGroupsContainer.getGroups()[g],b;if(G){b=G.getBindingContext().getPath()+'/';G.addBeforeContent(this._getBeforeContent(this.oController,b));G.addAfterContent(this._getAfterContent(this.oController,b));G.addHeaderAction(this._getHeaderAction(this.oController,b));}},_getBeforeContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["/tileActionModeActive"],formatter:function(t){return(!this.getParent().getIsGroupLocked()&&!this.getParent().getDefaultGroup()&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[this.oController._addGroupHandler]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getAfterContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:sap.ushell.resources.i18n.getText("add_group_at"),visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,b){return(i&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[this.oController._addGroupHandler]}).addStyleClass("sapUshellAddGroupButton");a.addDelegate({onAfterRendering:function(){jQuery(".sapUshellAddGroupButton").attr("tabindex",-1);}});return a;},_getHeaderActions:function(){var s=new sap.m.Button({text:{path:'isGroupVisible',formatter:function(i){if(sap.ui.Device.system.phone){this.setIcon(i?"sap-icon://hide":"sap-icon://show");}return sap.ushell.resources.i18n.getText(i?'HideGroupBtn':'ShowGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','/enableHideGroups','isGroupLocked','isDefaultGroup'],formatter:function(i,I,b,a){return i&&I&&!b&&!a;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._changeGroupVisibility(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");var d=new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(e){var S=e.getSource(),g=S.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");return[s,d];},_getHeaderAction:function(c,b){jQuery.sap.require("sap.ushell.ui.launchpad.GroupHeaderActions");return new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive',b+'isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");},_hidePlusTile:function(p){if(p){p.className+=" sapUshellHidePlusTile";}},_showPlusTile:function(p){if(p){p.className=p.className.split(' '+'sapUshellHidePlusTile').join('');}}});}());},"sap/ushell/components/flp/launchpad/dashboard/DashboardUIActions.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.flp.launchpad.dashboard.DashboardUIActions");sap.ui.base.Object.extend("sap.ushell.components.flp.launchpad.dashboard.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(i,s){if(sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions&&sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions()){return sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions();}sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions=jQuery.sap.getter(this.getInterface());this.oTileUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeActive',this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe('launchpad','actionModeInactive',this._disableGroupUIActions,this);sap.ushell.components.flp.launchpad.dashboard.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;},initializeUIActions:function(c){this.oController=c;var d=c.getView().sDashboardGroupsWrapperId,a,r=sap.ui.getCore().getConfiguration().getRTL(),C={containerSelector:'#dashboardGroups',wrapperSelector:d?"#"+d:undefined,rootSelector:"#dashboardGroups"},o=jQuery.extend(true,{},C,{switchModeDelay:1000,isTouch:c.getView().isTouch,isCombi:c.getView().isCombi,debug:false}),t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:c.getView().isTouch||c.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?jQuery(".sapUshellViewPortLeft").width():-jQuery(".sapUshellViewPortLeft").width()},W={forGroups:true,draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:c._publishAsync};if(c.getView().oDashboardGroupsBox.getGroups().length){if(c.getView().getModel().getProperty("/personalization")){if(!c.getView().ieHtml5DnD){jQuery.sap.require('sap.ushell.UIActions');this._disableTileUIActions();this._disableGroupUIActions();this.oTileUIActions=new sap.ushell.UIActions(jQuery.extend(true,{},o,t)).enable();this.oGroupUIActions=new sap.ushell.UIActions(jQuery.extend(true,{},o,g));a=c.getView().getModel().getProperty("/tileActionModeActive");if(a){this.oGroupUIActions.enable();}}else{jQuery.sap.require('sap.ushell.UIActionsWin8');this._disableTileUIActions();this._disableGroupUIActions();this.oTileUIActions=sap.ushell.UIActionsWin8.getInstance(jQuery.extend(true,{},C,w)).enable();this.oGroupUIActions=sap.ushell.UIActionsWin8.getInstance(jQuery.extend(true,{},C,W)).enable();}}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},_handleTileDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY);}},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,c,a,b,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.offset.left)&&(a.top===t.offset.top)){continue;}t.position=c;t.offset=a;C=j.data("clone");if(!C){continue;}b=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:b,top:T},{duration:250},{easing:"swing"});}},_handleStartDragTile:function(a,t){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.initDragMode();}jQuery(t).find("a").removeAttr('href');this.placeHolderElement=jQuery(".sapUshellTile-placeholder");sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},_handleTileDrop:function(e,t,a){var h=function(e,t){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}jQuery('#dashboardGroups .sapUshellHidePlusTile').removeClass('sapUshellHidePlusTile');if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}};if(sap.ushell.Layout.isAnimationsEnabled()&&a&&a.clone){var d=jQuery.Deferred();var j=jQuery(a.clone);var c=a.clone.getBoundingClientRect();var p=t.getBoundingClientRect();var s=j.css("transform").split(",");var b=p.top-c.top;var f=p.left-c.left;var g=parseInt(s[4],10)+f;var i=parseInt(s[5],10)+b;j.css({"transform":"translate3d("+g+"px, "+i+"px, 0px)","transition":"transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)"});setTimeout(function(){d.resolve();h.call(this,e,t);}.bind(this),300);return d.promise();}else{h.apply(this,arguments);}},_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',true);}},_endUIHandler:function(){if(sap.ushell.Layout.isAnimationsEnabled()){sap.ushell.Layout.endDragMode();}if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty('/isInDrag',false);}},_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();var g=jQuery(".sapUshellDashboardGroupsContainerItem-clone"),a=g.find(".sapUshellContainerTitle"),t=a.height(),b=a.width(),c,d,f,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!sap.ui.Device.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?jQuery(".sapUshellViewPortCenter").width()+this.oGroupUIActions.getMove().x+b:this.oGroupUIActions.getMove().x-(b/2)});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());jQuery.sap.log.info('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);c=jQuery("#dashboardGroups").offset().top;d=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;f=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=d-c-f;jQuery('.sapUshellDashboardView section').animate({scrollTop:s},0);},_handleGroupsUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},_handleGroupDrop:function(e,u){var b=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this._handleGroupMoved(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(b.publish,b,"launchpad","scrollToGroup",D),1);this.oTileUIActions.enable();},_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty('/isInDrag',false);},100);}},_setController:function(c){this.oController=c;}});}());},"sap/ushell/components/flp/launchpad/group_list/GroupList.controller.js":function(){(function(){"use strict";sap.ui.controller("sap.ushell.components.flp.launchpad.group_list.GroupList",{onInit:function(){this.sViewId="#"+this.getView().getId();this.sGroupListId="#"+this.getView().oGroupList.getId();this.handleScroll=this._fHandleScroll.bind(this);},onAfterRendering:function(){this.jqView=jQuery(this.sViewId);this.jgGroupList=jQuery(this.sGroupListId);var e=sap.ui.getCore().getEventBus();e.unsubscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.subscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.unsubscribe("grouplist","DashboardRerender",this._addScroll,this);e.subscribe("grouplist","DashboardRerender",this._addScroll,this);e.unsubscribe("launchpad","dashboardScroll",this.handleScroll,this);e.subscribe("launchpad","dashboardScroll",this.handleScroll,this);this._addScroll();},_addScroll:function(){var t=this;setTimeout(function(){this.dashboardElement=document.querySelector(".sapUshellDashboardView section");if(this.dashboardElement){this.dashboardElement.removeEventListener('scroll',t.handleScroll);this.dashboardElement.addEventListener('scroll',t.handleScroll);}}.bind(this),0);},_fHandleScroll:function(){var m=this.getView().getModel(),t=m.getProperty("/topGroupInViewPortIndex");if(!m.getProperty("/scrollingToGroup")){if(!m.getProperty("/groupList-skipScrollToGroup")){var g=jQuery('#groupList li.sapUshellGroupLI');var s=g.removeClass('sapUshellSelected').eq(t);s.addClass('sapUshellSelected');var a=document.getElementById('groupListPage-cont');var b=a.scrollTop;var c=b+a.offsetHeight;var d=s[0]?s[0].offsetTop:undefined;if(d<b){jQuery('#groupListPage section').animate({scrollTop:g[t].offsetTop},0);}else if(d+s[0].offsetHeight>c){jQuery('#groupListPage section').animate({scrollTop:b+g[t].offsetHeight},0);}}sap.ushell.utils.handleTilesVisibility();}},_handleGroupListItemPress:function(e){var s=e.getSource(),f;f=e.getParameter("action")==="sapenter";this._handleScrollToGroup(s,false,f);},_handleScrollToGroup:function(g,a,f){if(!g){return;}var t=this;document.querySelector(".sapUshellDashboardView").removeEventListener('scroll',t.handleScroll);this._publishAsync("launchpad","scrollToGroup",{group:g,groupChanged:a,focus:f});},_handleScrollAnimationEnd:function(){var t=this;document.querySelector(".sapUshellDashboardView").addEventListener('scroll',t.handleScroll);this.getView().getModel().setProperty("/scrollingToGroup",false);},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1);}});}());},"sap/ushell/components/flp/launchpad/group_list/GroupList.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require("sap.ui.core.IconPool");sap.ui.jsview("sap.ushell.components.flp.launchpad.group_list.GroupList",{createContent:function(c){this.parentComponent=sap.ui.core.Component.getOwnerComponentFor(this);this.oModel=this.parentComponent.getModel();var t=this,g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.flp.ComponentKeysHandler.goToTileContainer(e);},onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};jQuery.sap.require("sap.ushell.override");this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");if(this.getViewData().enablePersonalization===undefined||this.getViewData().enablePersonalization!==false){this.oActionList=new sap.m.List({items:[]});var o=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){o.call(this,e);};var a=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList]});a.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[this.oGroupList]});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getGroupListItemTemplate:function(c){var o=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,i,v){if(!v[t?1:0]){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.components.flp.launchpad.group_list.GroupList";}});}());},"sap/ushell/components/flp/settings/FlpSettings.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller"],function(C){"use strict";return C.extend("sap.ushell.components.flp.settings.FlpSettings",{DISPLAY_MODES:{'scroll':0,'tabs':1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oConfModel=new sap.ui.model.json.JSONModel({});this.oConfModel.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),flexAlignItems:sap.ui.Device.system.phone?'Stretch':'Start',textAlign:sap.ui.Device.system.phone?'Begin':'End',textDirection:sap.ui.Device.system.phone?'Column':'Row',labelWidth:sap.ui.Device.system.phone?"auto":"12rem"});this.getView().setModel(this.oConfModel,"config");var r=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties")});this.getView().setModel(r,"i18n");var i=this.getView().getViewData().initialDisplayMode;this.iCurrentMode=this.DISPLAY_MODES[i]||this.DISPLAY_MODES.scroll;},onBeforeRendering:function(){this.oConfModel.setProperty("/displayMode",this.iCurrentMode);},onSave:function(){this.iCurrentMode=this.oConfModel.getProperty("/displayMode");return this.DISPLAY_MODES.getName(this.iCurrentMode);}});});},"sap/ushell/components/flp/settings/FlpSettings.view.xml":'<View controllerName="sap.ushell.components.flp.settings.FlpSettings"\n      width="100%"\n      xmlns:m="sap.m">\n\n    <m:VBox visible="true" class="sapUiSmallMargin">\n        <m:items>\n            <m:HBox>\n                <m:items>\n                    <m:Label text="{i18n>AnchorBarLabel}:"\n                             class="sapUshellFlpSettingsLabel"\n                             width="{config>/labelWidth}"\n                             textAlign="{config>/textAlign}"/>\n\n                    <m:RadioButtonGroup selectedIndex="{config>/displayMode}">\n                        <m:buttons>\n                            <m:RadioButton text="{i18n>anchorBarScrollMode}" class="sapUshellAnchorBarScrollMode"/>\n                            <m:RadioButton text="{i18n>anchorBarTabMode}" class="sapUshellAnchorBarTabsMode"/>\n                        </m:buttons>\n                    </m:RadioButtonGroup>\n                </m:items>\n            </m:HBox>\n\n            <m:Text text="{i18n>homePageGroupDisplayDescriptionText}"\n                    class="sapUshellFlpSettingsDescription" />\n\n            <!-- second paragraph will be shown only if the user has edit option for his dashboard -->\n            <m:Text text="{i18n>homePageGroupDisplayDescriptionText_secondParagraph}"\n                    class="sapUshellFlpSettingsDescription"\n                    visible="false"/>\n        </m:items>\n    </m:VBox>\n</View>'}});
